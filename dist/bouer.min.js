!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Bouer=t()}(this,(function(){"use strict";function e(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var t=function(){function t(){}return t.log=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];console.log.apply(console,e([t.prefix],r,!1))},t.error=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];console.error.apply(console,e([t.prefix],r,!1))},t.warn=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];console.warn.apply(console,e([t.prefix],r,!1))},t.info=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];console.info.apply(console,e([t.prefix],r,!1))},t.prefix="[Bouer]",t}(),r=function(e,t){return fetch(e,t)},n=function(e,t,r){for(var n="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=!1,i="",a=0;a<(e||8);a++){var u=Math.floor(Math.random()*n.length);i+=o?n[u].toLowerCase():n[u],o=!o}return(t||"")+i+(r||"")},o=function(e){return void 0===e||null==e},i=function(e){return"object"==typeof e&&"[object Object]"===String(e)},a=function(e){return void 0!==e&&"string"==typeof e},u=function(e){return!e||!i(e)||0===Object.keys(e).length},s=function(e){return"function"==typeof e},c=function(e){return e?e.trim():e},l=function(e){return e.toLowerCase()},f=function(e){return function(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}(e)?String(e):i(e)?JSON.stringify(e):s(e.toString)?e.toString():String(e)},p=function(e,t,r){return Object.defineProperty(e,t,r),e},d=function(e,t,r){p(e,r,h(t,r))},h=function(e,t){return Object.getOwnPropertyDescriptor(e,t)},v=function(e,t,r){void 0===r&&(r=!1);var n=null;if(!e)return null;for(var i=0,a=t;i<a.length;i++){var u=a[i];if(n=e.attributes[u])break}return!o(n)&&r&&e.removeAttribute(n.name),n},m=function(e,t,r){for(var n=0;n<e.length;n++)s(t)&&t.call(r,e[n],n)},y=function(e,t){var r=w.createElement(e);s(t)&&t(r,w);var n={appendTo:function(e){return e.appendChild(r),n},build:function(){return r}};return n},b=function(e,t){m(Object.keys(e),(function(r){var n=t,o=e[r];if(r in n)return i(o)?b(o,n[r]):n[r]=o;d(t,e,r)}))},g=function(e,t){return p(e,"isConnected",{get:function(){return t.isConnected}}),e},N=function(e,t){return e.stack="",e},w=document,x=globalThis,A=y("a").build(),O=setInterval,k=function(){function e(t){this.delimiters=[],this.delimiters=t,e.singleton=this}return e.prototype.add=function(e){this.delimiters.push(e)},e.prototype.remove=function(e){var t=this.delimiters.findIndex((function(t){return t.name===e}));this.delimiters.splice(t,1)},e.prototype.run=function(e){var t=this;if(o(e)||""===c(e))return[];var r=null,n=function(e,n){for(var o=0;o<t.delimiters.length;o++){var i=t.delimiters[o],a=e.match(RegExp(i.delimiter.open+"([\\S\\s]*?)"+i.delimiter.close,n||""));if(a)return r=i,a}},i=n(e,"g");return i?i.map((function(e){var t=n(e);return{field:t[0],expression:c(t[1]),delimiter:r}})):[]},e}(),E={ignore:"e-ignore",build:"e-build",array:"e-array",if:"e-if",elseif:"e-else-if",else:"e-else",show:"e-show",req:"e-req",tmp:"e-tmp",fill:"e-fill",for:"e-for",use:"e-use",id:"e-id",order:"e-order",filter:"e-filter",data:"data",def:"e-def",wait:"wait-data",toggle:"e-toggle",content:"e-content",bind:"e-bind",property:"e-",anm:"e-anm",skeleton:"e-skeleton",route:"route-view",href:":href",ihref:"!href",copy:"e-copy",component:":name",on:"on:",check:function(e,t){return e.nodeName.substr(0,t.length)===t},isConstant:function(e){var t=this;return-1!==Object.keys(this).map((function(e){return t[e]})).indexOf(e)}},T=function(){function e(){}return e.obj=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};return m(e,(function(e){o(e)||m(Object.keys(e),(function(t){var n=e[t];o(n)||d(r,e,t)}))})),r},e.addToObj=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return m(t,(function(t){o(t)||m(Object.keys(t),(function(r){var n=t[r];o(n)||d(e,t,r)}))})),e},e.array=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];return m(e,(function(e){o(e)||m(Object.keys(e),(function(t){var n=e[t];o(n)||(Array.isArray(n)?[].push.apply(r,n):r.push(n))}))})),r},e}(),j=function(){function e(t){this.bouer=t,this.global=this.createWindow(),e.singleton=this}return e.prototype.createWindow=function(){var e;return y("iframe",(function(t,r){t.style.display="none!important",r.body.appendChild(t),e=t.contentWindow,r.body.removeChild(t)})),delete e.name,e},e.prototype.execRaw=function(e,r){try{var n="return(function(){"+e+"; }).apply(this, arguments)";x.Function(n).apply(r||this.bouer)}catch(e){t.error(N(e))}},e.prototype.exec=function(e){var r=this,n=e.data,o=e.args,i=e.expression,a=e.isReturn,u=e.aditional,s=this.global,c={},l=T.obj(u||{});m(Object.keys(n),(function(e){d(l,n,e)})),m(Object.keys(this.bouer.globalData),(function(e){if(e in l)return t.warn('It was not possible to use the globalData property "'+e+'" because it already defined in the current scope.');d(l,r.bouer.globalData,e)}));var f,p=Object.keys(l);m(p,(function(e){delete s[e],e in s&&!0===h(s,e).configurable&&(c[e]=s[e]),e in c&&(s[e]=l[e]),d(s,l,e)}));try{var v='return(function(){"use strict"; '+(!1===a?"":"return")+" "+i+" }).apply(this, arguments)";f=this.global.Function(v).apply(this.bouer,o)}catch(e){t.error(N(e))}return m(p,(function(e){return delete s[e]})),f},e}(),C=function(){function e(){}return e.on=function(e,t){return this[e].push(t),{eventName:e,callback:t}},e.off=function(e,t){var r=this[e];return r.splice(r.indexOf(t),1),!0},e.emit=function(e,r,n,o){try{m(this[e],(function(e){return e(r,n,o)}))}catch(e){t.error(N(e))}},e.BeforeGet=[],e.AfterGet=[],e.BeforeSet=[],e.AfterSet=[],e.BeforeArrayChanges=[],e.AfterArrayChanges=[],e}(),I=function(){function e(t){this.binds=[],this.DEFAULT_BINDER_PROPERTIES={text:"value",number:"valueAsNumber",checkbox:"checked",radio:"checked"},this.BindingDirection={fromInputToData:"to-data-property",fromDataToInput:"to-input"},e.singleton=this,this.evaluator=j.singleton,this.bouer=t,this.cleanup()}return e.prototype.create=function(e){var t,r=this,n=e.node,a=e.data,u=e.fields,l=e.eReplace,p=c(null!==(t=n.nodeValue)&&void 0!==t?t:""),d=n.nodeName,h=n.ownerElement||n.parentNode,v=e.onChange||function(e,t){},b={name:d,value:p,bindOptions:e,boundNode:n};if(d.substr(0,E.bind.length)===E.bind){var g="";g=E.bind===d?this.DEFAULT_BINDER_PROPERTIES[h.type]||"value":d.split(":")[1];var N=function(e,t){switch(e){case r.BindingDirection.fromDataToInput:return h[g]=t;case r.BindingDirection.fromInputToData:return a[p]=h[g]}},w=C.on("AfterGet",(function(e){r.binds.push(e.watch((function(e){N(r.BindingDirection.fromDataToInput,e),v(e,n)}),n))})),x=this.evaluator.exec({expression:p,data:a});w&&C.off("AfterGet",w.callback),h[g]=i(x)?f(x):o(x)?"":x;var A=[h.nodeName.toLowerCase(),"propertychange","change"],O=function(){N(r.BindingDirection.fromInputToData,h[g])};return m(A,(function(e){return h.addEventListener(e,O,!1)})),h.removeAttribute(n.nodeName),b}var k=n;d.substr(0,E.property.length)===E.property&&o(l)&&(b.name=d.substr(E.property.length),h.setAttribute(b.name,p),k=h.attributes[b.name],h.removeAttribute(n.nodeName));var T=function(){var e=b.value,t=!1;if(m(u,(function(i){var u=i.delimiter;u&&"html"===u.name&&(t=!0);var c=r.evaluator.exec({expression:i.expression,data:a});c=o(c)?"":c,e=e.replace(i.field,f(c)),u&&s(u.action)&&(e=u.action(e,n,a))})),t){var i=y("div",(function(t){t.innerHTML=e})).build().children[0];h.appendChild(i)}else k.nodeValue=e},j=C.on("BeforeGet",(function(e){r.binds.push(e.watch((function(e){T(),v(e,n)}),n))}));return T(),j&&C.off("BeforeGet",j.callback),b.boundNode=k,b},e.prototype.cleanup=function(){var e=this;O((function(){return m(e.binds,(function(t,r){t.node&&(t.node.isConnected||(t.destroy(),e.binds.splice(r,1)))}))}),1e3)},e}(),D=function(e){var t=this;this.composedPath=function(){return t.source.composedPath()},this.initEvent=function(e,r,n){return t.source.initEvent(e,r,n)},this.preventDefault=function(){return t.source.preventDefault()},this.stopImmediatePropagation=function(){return t.source.stopImmediatePropagation()},this.stopPropagation=function(){return t.source.stopPropagation()};var r=e.source,n=e.type;this.source=r||new Event(n),this.bubbles=this.source.bubbles,this.cancelBubble=this.source.cancelBubble,this.cancelable=this.source.cancelable,this.composed=this.source.composed,this.currentTarget=this.source.currentTarget,this.defaultPrevented=this.source.defaultPrevented,this.eventPhase=this.source.eventPhase,this.isTrusted=this.source.isTrusted,this.target=this.source.target,this.timeStamp=this.source.timeStamp,this.type=this.source.type,this.returnValue=this.source.returnValue,this.srcElement=this.source.srcElement,this.AT_TARGET=this.source.AT_TARGET,this.BUBBLING_PHASE=this.source.BUBBLING_PHASE,this.CAPTURING_PHASE=this.source.CAPTURING_PHASE,this.NONE=this.source.NONE},L=function(){function e(t){this.events=[],e.singleton=this,this.bouer=t,this.evaluator=j.singleton,this.input=y("input").build()}return e.prototype.handle=function(e,r){var n,i=this,a=e.ownerElement||e.parentNode,u=e.nodeName;if(o(a))return t.error('Invalid ParentElement of "'+u+'"');var f=c(null!==(n=e.nodeValue)&&void 0!==n?n:""),p=u.substr(E.on.length).split("."),d=p[0];p.shift(),""===f&&t.error('Expected an expression in the "'+u+'" and got an <empty string>.');var h=function(e,n){var o=-1!==p.indexOf("once");m(p,(function(t){m(Object.keys(e),(function(r){var n;(n=e[r]&&s(n)&&l(r)===l(t))&&n()}))}));var a=new D({source:e,type:e.type}),u=T.array(a,n),c=i.evaluator.exec({data:T.obj(r,{event:a}),expression:f,args:u});if(s(c))try{c.apply(i.bouer,u)}catch(e){t.error(N(e))}return o};if("on"+d in this.input){var v=function(e){h(e,[])&&a.removeEventListener(d,v,!1)};a.addEventListener(d,v,!1)}else this.on(d,h)},e.prototype.on=function(e,t){var r={eventName:e,callback:function(e,r){return t(e,r)}};return this.events.push(r),r},e.prototype.off=function(e,t){var r=-1,n=this.events.find((function(n,o){if(n.eventName===e&&t==n.callback)return r=o,!0}));return n&&this.events.splice(r,1),n},e.prototype.emit=function(e){var t=this,r=e.eventName,n=e.arguments;m(this.events,(function(e){r===e.eventName&&e.callback.call(t.bouer,new D({type:r}),n||[])}))},e}(),V=function(e,t,r){var n=this;this.destroy=function(){var e=n.reactive.watches.indexOf(n);-1!==e&&n.reactive.watches.splice(e,1),n.onDestroy&&n.onDestroy()},this.reactive=e,this.property=e.propertyName,this.callback=t,r&&(this.node=r.node,this.onDestroy=r.onDestroy)},S=function(){function e(t){this.bouer=t,e.singleton=this}return e.prototype.create=function(e){var t=w.createComment("e");return t.id=e||n(8),t},e.prototype.get=function(e,t){if(!o(e))return t=t||this.bouer.el,this.retrieve(t).find((function(t){return t.id===e}))},e.prototype.retrieve=function(e){if(!e)return[];for(var t,r=w.createNodeIterator(e,NodeFilter.SHOW_COMMENT,(function(){return NodeFilter.FILTER_ACCEPT})),n=[];t=r.nextNode();)"id"in t&&n.push(t);return n},e}(),M=function(){function e(t){var r=this;this.watches=[],this.get=function(){C.emit("BeforeGet",r);var e=r.propertyValue;return C.emit("AfterGet",r),e},this.set=function(t){var n=r.propertyValue;n!==t&&(C.emit("BeforeSet",r),i(t)||Array.isArray(t)?Array.isArray(t)?(e.transform(t,r),o(r.propertyValue)?r.propertyValue=t:(Array.isArray(r.propertyValue)&&r.propertyValue.splice(0,r.propertyValue.length),[].push.apply(r.propertyValue,t))):i(t)&&(t instanceof Node?r.propertyValue=t:(e.transform(t),o(r.propertyValue)?r.propertyValue=t:b(r.propertyValue,t))):r.propertyValue=t,C.emit("AfterSet",r),m(r.watches,(function(e){return e.callback(r.propertyValue,n)})))},this.propertyName=t.propertyName,this.propertySource=t.sourceObject,this.propertyDescriptor=h(this.propertySource,this.propertyName),this.propertyValue=this.propertyDescriptor.value}var r;return e.prototype.watch=function(e,t){var r=new V(this,e,{node:t});return this.watches.push(r),r},r=e,e.transform=function(n,a){if(Array.isArray(n)){if(null==a)return t.warn("Cannot transform this array to a reactive one because no reactive objecto was provided"),n;var u=n,s={},c=u.__proto__=Object.create(Array.prototype);return m(["push","pop","unshift","shift","splice"],(function(e){s[e]=u[e].bind(u),c[e]=function(){var t=u.slice();C.emit("BeforeArrayChanges",a,e,{arrayNew:t,arrayOld:t});var r=s[e].apply(u,arguments);return C.emit("AfterArrayChanges",a,e,{arrayNew:t,arrayOld:t}),r}})),u}return i(n)?(m(Object.keys(n),(function(t){var a=n;if(!o(h(n,t).value)){var u=new e({propertyName:t,sourceObject:n});p(n,t,u);var s=a[t];i(s)?r.transform(s):Array.isArray(s)&&(r.transform(s,u),m(s,(function(e){return r.transform(e)})))}})),n):n},e}(),_=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.node=e}return e.prototype.connect=function(e){m(this.node,(function(t){return g(t,e)}))},e}(),B=function(){function r(e,t){this.errorMsgEmptyNode=function(e){return'Expected an expression in "'+e.nodeName+'" and got an <empty string>.'},this.errorMsgNodeValue=function(e){var t;return'Expected an expression in "'+e.nodeName+'" and got "'+(null!==(t=e.nodeValue)&&void 0!==t?t:"")+'".'},this.bouer=e,this.htmlHandler=t,this.evaluator=j.singleton,this.delimiter=k.singleton,this.binder=I.singleton,this.comment=S.singleton}return r.prototype.toOwnerNode=function(e){return e.ownerElement||e.parentNode},r.prototype.returner=function(t,r){return s(r)&&r(),new(_.bind.apply(_,e([void 0],t,!1)))},r.prototype.ignore=function(e){e.nodeValue="true"},r.prototype.if=function(e,r){var n,o,i=this,a=this.toOwnerNode(e),u=a.parentElement,s=[],l=this.comment.create(),f=e.nodeName,p=function(){};if(!u)return this.returner(e);if(f===E.elseif||f===E.else)return this.returner(e);var d=a,h=[],y=function(){if(null==d)return"break";var e=v(d,["e-if","e-else-if","e-else"]);if(!e)return"break";if("e-else"!==e.nodeName&&""===c(null!==(n=e.nodeValue)&&void 0!==n?n:""))return{value:b.returner(e,(function(){return t.error(i.errorMsgEmptyNode(e))}))};if(0!==b.delimiter.run(null!==(o=e.nodeValue)&&void 0!==o?o:"").length)return{value:b.returner(e,(function(){return t.error(i.errorMsgNodeValue(e))}))};if(s.push({node:e,element:d}),g(d,u),g(e,u),"e-else"===e.nodeName)return d.removeAttribute(e.nodeName),"break";var a=C.on("BeforeGet",(function(t){-1===h.findIndex((function(e){return e.reactive.propertyName==t.propertyName}))&&h.push({attr:e,reactive:t})}));b.evaluator.exec({data:r,expression:e.value}),a&&C.off("BeforeGet",a.callback),d.removeAttribute(e.nodeName)},b=this;do{var N=y();if("object"==typeof N)return N.value;if("break"===N)break}while(d=d.nextElementSibling);return m(h,(function(e){return i.binder.binds.push(e.reactive.watch((function(){return p()}),e.attr))})),(p=function(){m(s,(function(e){e.element.parentElement&&(l.isConnected?u.removeChild(e.element):u.replaceChild(l,e.element))}));var e=s.map((function(e,t){var r=e.node.value;switch(e.node.name){case E.if:return"if("+r+"){ _cb("+t+"); }";case E.elseif:return"else if("+r+"){ _cb("+t+"); }";case E.else:return"else{ _cb("+t+"); }"}})).join(" ");i.evaluator.exec({data:r,isReturn:!1,expression:e,aditional:{_cb:function(e){var t=s[e].element;u.replaceChild(t,l),i.htmlHandler.compile({el:t,data:r})}}})})(),this.returner(s.map((function(e){return e.node})))},r.prototype.show=function(e,r){var n,o=this,i=this.toOwnerNode(e),a=c(null!==(n=e.nodeValue)&&void 0!==n?n:""),u=0!==this.delimiter.run(a).length;if(""===a)return this.returner(e,(function(){t.error(o.errorMsgEmptyNode(e))}));if(u)return this.returner(e,(function(){t.error(o.errorMsgNodeValue(e))}));var s=function(e){var t=o.evaluator.exec({expression:a,data:r});e.style.display=t?"":"none"},l=this.binder.create({data:r,node:e,fields:[{expression:a,field:a}],onChange:function(){return s(i)}});return s(i),i.removeAttribute(l.boundNode.nodeName),this.returner(e)},r.prototype.for=function(e,r){var n,i=this,a=this.toOwnerNode(e),u=a.parentElement,s=this.comment.create(),l=e.nodeName,p=c(null!==(n=e.nodeValue)&&void 0!==n?n:""),d=[],h=function(){};if(!u)return this.returner(e);if(""===p)return this.returner(e,(function(){t.error(i.errorMsgEmptyNode(e))}));if(!p.includes(" of ")&&!p.includes(" in "))return this.returner(e,(function(){t.error('Expected a valid "for" expression in "'+l+'" and got "'+p+'".\nValid: e-for="item of items".')}));var v=this.delimiter.run(p);0!==v.length&&this.binder.create({data:r,fields:v,eReplace:!0,node:e,onChange:function(){return h()}}),a.removeAttribute(l);var y=a.cloneNode(!0);u.replaceChild(s,a),g(y,s),g(e,s);var b=C.on("AfterGet",(function(t){return i.binder.binds.push(t.watch((function(){return h()}),e))})),N=C.on("AfterArrayChanges",(function(e){return h()}));return this.binder.binds.push(new V(new M({propertyName:"_",sourceObject:{_:[]}}),(function(){}),{node:e,onDestroy:function(){return C.off("AfterArrayChanges",N.callback)}})),(h=function(){var n,a=(p=c(null!==(n=e.nodeValue)&&void 0!==n?n:"")).split("|").map((function(e){return c(e)})),h=a[0].replace("(","").replace(")","");a.shift();var v=" of ",b=h.split(v);0===b.length&&(v=" in ",b=h.split(v));var g=b[0],N=b[1],w=g.split(",").map((function(e){return c(e)})),x="let "+g+(g.includes(",")?"=0":"")+";",A=w.length>1;h=[A?w[0]:g,"_flt("+N+")"].join(v),m(d,(function(e){e.parentElement&&u.removeChild(e)})),d=[],i.evaluator.exec({data:r,isReturn:!1,expression:x+"for("+h+"){  _each("+g+(A?"++":"")+")}",aditional:{_each:function(e,t){var n=T.obj(r);n[w[0]]=e,A&&(n[w[1]]=t);var o=u.insertBefore(y.cloneNode(!0),s);i.htmlHandler.compile({el:o,data:n})},_flt:function(e){var n=T.array(e),u=function(e){return a.find((function(t){return t.substr(0,e.length)===e}))},s=u("filter");if(s){var d=s.split(":").map((function(e){return c(e)}));1==d.length?t.error('Invalid "'+l+'" filter expression "'+p+'", at least a filter-value and filter-keys, or a filter-function must be provided'):n=function(e,n){var a=n[1],u=n[2];if(o(a)||""===a)return t.error('Invalid filter-value in "'+l+'" "'+p+'" expression.'),e;if("function"==typeof(a=i.evaluator.exec({data:r,expression:a})))e=a(e);else{if(o(u)||""===u)return t.error('Invalid filter-keys in "'+l+'" "'+p+'" expression, at least one filter-key to be provided.'),e;var s=[];m(e,(function(e){for(var t=0,r=u.split(",").map((function(e){return c(e)}));t<r.length;t++){var n=r[t],o=i.evaluator.exec({data:e,expression:n});if(!f(o).includes(a))break;s.push(e)}})),e=s}return e}(n,d)}var h=u("order");if(h){var v=h.split(":").map((function(e){return c(e)}));1==v.length?t.error('Invalid "'+l+'" order  expression "'+p+'", at least the order type must be provided'):n=function(e,r,n){return r||(r="asc"),e.sort((function(e,i){var a=function(e,n){if(o(e)||o(n))return 0;switch(r.toLowerCase()){case"asc":return e?1:-1;case"desc":return n?-1:1;default:return t.log('The "'+r+'" order type is invalid: "'+p+'". Available types are: "asc" for order ascendent and "desc" for order descendent.'),0}};return n?a(e[n]>i[n],i[n]<e[n]):a(e>i,i<e)}))}(n,v[1],v[2])}return n}}})})(),C.off("AfterGet",b.callback),this.returner(e)},r.prototype.def=function(e,r){var n,o=this,a=this.toOwnerNode(e),u=c(null!==(n=e.nodeValue)&&void 0!==n?n:""),s=0!==this.delimiter.run(u).length;if(""===u)return this.returner(e,(function(){t.error(o.errorMsgEmptyNode(e))}));if(s)return this.returner(e,(function(){t.error(o.errorMsgNodeValue(e))}));var l=this.evaluator.exec({data:r,expression:u});if(!i(l))return this.returner(e,(function(){t.error('Expected a valid Object Literal expression in "'+e.nodeName+'" and got "'+u+'".')}));this.bouer.setData(l,r),a.removeAttribute(e.nodeName)},r.prototype.content=function(e){var r,n=this,o=this.toOwnerNode(e),i=c(null!==(r=e.nodeValue)&&void 0!==r?r:"");if(""===i)return this.returner(e,(function(){t.error(n.errorMsgEmptyNode(e))}));o.innerText=i,o.removeAttribute(e.nodeName)},r.prototype.bind=function(e,r){var n,o=this,i=this.toOwnerNode(e),a=c(null!==(n=e.nodeValue)&&void 0!==n?n:""),u=0!==this.delimiter.run(a).length;return""===a?this.returner(e,(function(){t.error(o.errorMsgEmptyNode(e))})):u?this.returner(e,(function(){t.error(o.errorMsgNodeValue(e))})):(this.binder.create({node:e,fields:[{field:a,expression:a}],data:r}),i.removeAttribute(e.nodeName),this.returner(e))},r.prototype.property=function(e,r){var n,o=this,a=this.toOwnerNode(e),u=c(null!==(n=e.nodeValue)&&void 0!==n?n:""),s=0!==this.delimiter.run(u).length,l=function(e){},f=function(e){var t;return'Invalid value, expected an Object/Object Literal in "'+e.nodeName+'" and got "'+(null!==(t=e.nodeValue)&&void 0!==t?t:"")+'".'};if(""===u)return this.returner(e,(function(){t.error(f(e))}));if(s)return this.returner(e);var p=this.evaluator.exec({data:r,expression:u});return i(p)?(this.binder.create({data:r,node:e,eReplace:!1,fields:[{expression:u,field:u}],onChange:function(){return l(o.evaluator.exec({data:r,expression:u}))}}),a.removeAttribute(e.nodeName),(l=function(t){var r=e.nodeName.substr(E.property.length),n=a.attributes[r];if(n||(a.setAttribute(r,""),n=a.attributes[r]),m(Object.keys(t),(function(e){if(!t[e])return n.value=c(n.value.replace(e,""));n.value=n.value.includes(e)?n.value:c(n.value+" "+e)})),""===n.value)return a.removeAttribute(r)})(p),this.returner(e)):this.returner(e,(function(){t.error(f(e))}))},r.prototype.req=function(e,r){return t.info(e,r),this.returner(e)},r.prototype.data=function(e,t){return T.obj(t,{$this:t}),this.returner(e)},r.prototype.href=function(e,t){return this.returner(e)},r.prototype.skeleton=function(e,r){t.warn("e-skeleton not implemented yet.")},r.prototype.wait=function(e,r){t.warn("wait-data not implemented yet.")},r.prototype.copy=function(e){t.warn("e-copy not implemented yet.")},r.prototype.component=function(e,r){t.warn("<component /> not implemented yet.")},r}(),R=function(){function e(e){this.url=e}return e.prototype.params=function(){return{}},e.prototype.add=function(e){return e},e.prototype.remove=function(e){return e},e}(),P=function(){function e(){}return e.observe=function(e,t){var r=new MutationObserver((function(n){t({element:e,mutation:r,records:n})}));r.observe(e,{childList:!0})},e}(),G=function(){function e(e){this.scripts=[],this.styles=[],this.orders=[],this.events={},this.name=e.name,this.path=e.path,Object.assign(this,e),this.data=M.transform(this.data||{})}return Object.defineProperty(e.prototype,"isReady",{get:function(){return!o(this.template)},enumerable:!1,configurable:!0}),e.prototype.insert=function(e,o){var i=this,a=e.nodeName.toLowerCase(),u=e.parentElement;if(!e.isConnected||!u)return t.error("Insert location of component <"+a+"></"+a+"> not found.");if(!this.isReady)return t.error("The <"+a+"></"+a+"> component is not ready yet to be inserted.");!0!==this.keepAlive&&y("body",(function(e){return e.innerHTML=i.template,m([].slice.apply(e.querySelectorAll("script")),(function(t){i.scripts.push(t),e.removeChild(t)})),m([].slice.apply(e.querySelectorAll('link[rel="stylesheet"]')),(function(t){i.styles.push(t),e.removeChild(t)})),m([].slice.apply(e.querySelectorAll("style")),(function(t){i.styles.push(t),e.removeChild(t)})),0===e.children.length?t.error("The component <"+a+"></"+a+"> seems to be empty or it has not a root element.eg.: <div></div>, to be included."):e.children.length>1?t.error("The component <"+a+"></"+a+"> seems to have multiple root element, it must have only one root."):(i.el=e.children[0],void i.created(new D({type:"created"})))}));var s=this.el;m([].slice.call(e.attributes),(function(t){if(e.removeAttribute(t.name),"class"===t.nodeName)return e.classList.forEach((function(e){s.classList.add(e)}));if("data"===t.nodeName){var r=j.singleton.exec({data:o,expression:""!==c(t.value)?t.value:"this.data"});return m(Object.keys(r),(function(e){d(i.data,r,e)}))}s.attributes.setNamedItem(t)})),this.beforeMount(new D({type:"beforeMount"})),u.replaceChild(s,e);var l={};s.classList.forEach((function(e){return l[e]=!0}));var f=function(e,t){var r="STYLE"===e.nodeName,n=[];if(e.sheet){for(var o=e.sheet.cssRules,i=0;i<o.length;i++){var a=o.item(i);if(a){var u=a,s=u.selectorText.substr(1),c=l[s]?"":" ";u.selectorText="."+t+c+u.selectorText,r&&n.push(u.cssText)}}r&&(e.innerText=n.join("\n"))}};m(this.styles,(function(e){var t=e.cloneNode(!0),r=n(7,"bouer-s");if(t instanceof HTMLLinkElement&&t.hasAttribute("scoped")&&(t.onload=function(e){return f(e.target,r)}),w.head.appendChild(t),t.hasAttribute("scoped"))return s.classList.add(r),t instanceof HTMLStyleElement?f(t,r):void 0})),this.mounted(new D({type:"mounted"}));var p=function(e){try{j.singleton.execRaw(e||"",i),i.beforeLoad(new D({type:"beforeLoad"})),q.singleton.compile({data:i.data,el:s,onDone:function(){return i.loaded(new D({type:"loaded"}))}}),P.observe(s,(function(){s.isConnected||i.destroy()}))}catch(e){t.error("Error in <"+a+"></"+a+"> component."),t.error(N(e))}};if(0===this.scripts.length)return p();var h=[],v={},b=[],g=[];return m(this.scripts,(function(e){""==e.src||e.innerHTML?h.push(e.innerHTML):g.push(e.src)})),0==g.length?p(h.join("\n\n")):m(g,(function(e,n){v[e]=!0,r(e,{headers:{"Content-Type":"text/plain"}}).then((function(e){return e.text()})).then((function(t){if(delete v[e],b[n]=t,0===Object.keys(v).length)return p(T.array(b,h).join("\n\n"))})).catch((function(r){r.stack="",t.error('Error loading the <script src="'+e+'"><\/script> in <'+a+"></"+a+"> component, remove it in order to be compiled."),t.log(r),i.failed(new D({type:"failed"}))}))}))},e.prototype.export=function(e){var r=this;return i(e)?m(Object.keys(e),(function(t){d(r.data,e,t)})):t.log('Invalid object for component.export(...), only "Object Literal" is allowed.')},e.prototype.destroy=function(){if(!this.el)return!1;var e=this.el.parentElement;if(!e)return!1;this.beforeDestroy(new D({type:"beforeDestroy"})),this.events={},e.removeChild(this.el),this.destroyed(new D({type:"destroyed"}))},e.prototype.params=function(){new R(this.route||"")},e.prototype.on=function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),{eventName:e,callback:t}},e.prototype.off=function(e,t){if(!this.events[e])return!1;var r=this.events[e].indexOf(t);return this.events[e].splice(r,1),!0},e.prototype.requested=function(e){},e.prototype.created=function(e){},e.prototype.beforeMount=function(e){},e.prototype.mounted=function(e){},e.prototype.beforeLoad=function(e){},e.prototype.loaded=function(e){},e.prototype.beforeDestroy=function(e){},e.prototype.destroyed=function(e){},e.prototype.failed=function(e){},e}(),H=function(){function e(t,r){var n=this;this.components=[],this.prepare=function(e){m(e,(function(t){var r=t;r instanceof G||(r=new G(r));var o=r;o.bouer=n.bouer,e[t.name]=t,n.components.push(o),n.components[t.name]=o}))},e.singleton=this,this.bouer=t,r&&this.prepare(r)}return e.prototype.check=function(e){return e.toLowerCase()in this.components},e.prototype.order=function(e,n){var o=e.nodeName.toLowerCase(),i=this.components,a=i[o];if(!a)return t.error('No component with name "'+o+'" registered.');var u=a,s=T.obj(n,{$this:n});if(u.template){var l=new G(u);return l.insert(e,s),void(!0===l.keepAlive&&(i[o]=l))}var f=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=e.split(/\/\//),o=n[0]+"//",i=n[1].split(/\//),a=[];return m(i,(function(e){return c(e)?a.push(e):null})),m(t,(function(e){return m(e.split(/\//),(function(e){return c(e)?a.push(e):null}))})),o+a.join("/")}(function(e){var t=e;"documentMode"in w&&(A.setAttribute("href",t),t=A.href),A.setAttribute("href",t);var r=A.hostname;"[::1]"!==A.hostname&&r.indexOf(":")>-1&&(r="["+r+"]");var n={href:A.href,baseURI:A.baseURI,protocol:A.protocol?A.protocol.replace(/:$/,""):"",host:A.host,search:A.search?A.search.replace(/^\?/,""):"",hash:A.hash?A.hash.replace(/^#/,""):"",hostname:r,port:A.port,pathname:"/"===A.pathname.charAt(0)?A.pathname:"/"+A.pathname,anchor:A,origin:""};return n.origin=n.protocol+"://"+n.host,n}(A.baseURI).baseURI,u.path);"function"==typeof u.requested&&u.requested(new D({type:"requested"})),r(f,{headers:{"Content-Type":"text/plain"}}).then((function(e){return e.text()})).then((function(t){u.template=t;var r=new G(u);r.insert(e,s),!0===r.keepAlive&&(i[o]=r)})).catch((function(e){e.stack="",t.log(e),"function"==typeof u.failed&&u.failed(new D({type:"failed"}))}))},e}(),q=function(){function e(t){this.NODES_TO_IGNORE_IN_COMPILATION={SCRIPT:1,"#comment":8},e.singleton=this,this.bouer=t,this.delimiter=k.singleton,this.eventHandler=L.singleton,this.binder=I.singleton,this.component=H.singleton,this.directive=new B(t,this)}return e.prototype.toJsObj=function(e,r,n){var l=void 0,f=this;if(e instanceof Element)l=e;else{if(i(e))return e;if(a(e))try{l=this.bouer.el.querySelector(e)}catch(t){return e}}if(o(l))throw t.error("Invalid element passed in app.toJsObj(...)");var p=function(e){return e.split(",").map((function(e){return c(e.replace("[","").replace("]",""))}))},d=p((r=r||{}).names||"[name]"),h=p(r.values||"[value]"),y=function(e,t){return t in e?e[t]:e.getAttribute(t)||e.innerText},b=function(e){var t={},r={BUTTON:!0},o={checkbox:!0,radio:!0};return function e(i){var a=v(i,d);if(a){var u=a.value;if(!0===r[i.tagName])return;if(i instanceof HTMLInputElement&&!0===o[i.type]&&!1===i.checked)return;var c=t[u],l=i.hasAttribute(E.array),p=function(e){var t=void 0;return h.find((function(r){return!!(t=y(e,r))})),t}(i);t[u]=l?c?T.array(c,p):[p]:c?T.array(c,p):p,s(n)&&n.call(f,t,u,p,i)}m([].slice.call(i.children),(function(t){v(t,[E.build])||e(t)}))}(e),t},g=b(l),N=[].slice.call(l.querySelectorAll("["+E.build+"]"));return m(N,(function(e){var t=y(e,E.build),r=e.hasAttribute(E.array),a=b(e);(function(e){if(u(e))return!1;for(var t=!1,r=Object.keys(e),n=0;n<r.length;n++)if(!o(r[n])){t=!0;break}return t})(a)&&function t(c,l){var p=c.split("."),d=p[0];p.shift();var h=l[d];return o(h)&&(l[d]={}),0===p.length?(r?i(h)&&!u(h)?l[d]=[T.obj(h,a)]:Array.isArray(h)?h.push(a):l[d]=[a]:o(h)?l[d]=a:l[d]=T.obj(h,a),void(s(n)&&n.call(f,l,d,a,e))):Array.isArray(h)?m(h,(function(e){t(p.join("."),e)})):void t(p.join("."),l[d])}(t,g)})),g},e.prototype.compile=function(e){var r=this,n=e.el,o=e.data||this.bouer.data;if(this.analizer(n.outerHTML)){var i=function(e,o){if(!(e.nodeName in r.NODES_TO_IGNORE_IN_COMPILATION)){if(e instanceof Element){if(E.ignore in e.attributes)return r.directive.ignore(e);if(E.def in e.attributes&&r.directive.def(e.attributes[E.def],o),E.wait in e.attributes)return r.directive.wait(e.attributes[E.wait],o);if(E.copy in e.attributes&&r.directive.copy(e),E.for in e.attributes)return r.directive.for(e.attributes[E.for],o).connect(n);if(E.if in e.attributes)return r.directive.if(e.attributes[E.if],o);if((E.elseif in e.attributes||E.else in e.attributes)&&t.warn('The "'+E.elseif+'" or "'+E.else+'" requires an element with "'+E.if+'" above.'),E.show in e.attributes)return r.directive.show(e.attributes[E.show],o).connect(n);var u=null;if((u=e.attributes[E.req])||(u=[].slice.call(e.attributes).find((function(e){return E.check(e,E.req)}))))return r.directive.req(u,o);if(r.component.check(e.nodeName))return r.component.order(e,o);if(E.data in e.attributes)return r.directive.data(e.attributes[E.data],o);m([].slice.call(e.attributes),(function(e){i(e,o)}))}if(E.check(e,E.href)||E.check(e,E.ihref))return r.directive.href(e,o).connect(n);if(E.check(e,E.content))return r.directive.content(e);if(E.check(e,E.bind))return r.directive.bind(e,o).connect(n);if(E.check(e,E.property)&&!E.isConstant(e.nodeName)&&r.directive.property(e,o).connect(n),E.check(e,E.on))return r.eventHandler.handle(e,o);var s;a(e.nodeValue)&&(s=r.delimiter.run(e.nodeValue))&&0!==s.length&&r.binder.create({node:g(e,n),fields:s,data:o}),m([].slice.call(e.childNodes),(function(e){return i(e,o)}))}};i(n,o),s(e.onDone)&&e.onDone.call(this.bouer,n)}},e.prototype.analizer=function(e){return!0},e}();return function(){function e(e,r){if(this.name="Bouer",this.version="3.0.0",r=r||{},Object.assign(this,r),o(e)||""===c(e))throw t.error("Invalid selector provided to the instance.");var n=this,i=w.querySelector(e);if(o(i))throw t.error("Element with selector '"+e+"' not found.");this.el=i,n.beforeMount(n.el,n),new j(this),new S(this),this.data=M.transform(r.data||{}),this.globalData=M.transform(r.globalData||{}),n.mounted(n.el,n);var a=new k([{name:"bouer",delimiter:{open:"-e-",close:"-"}},{name:"common",delimiter:{open:"{{",close:"}}"}},{name:"html",delimiter:{open:"{{:html ",close:"}}"}}]);new L(this),new I(this),new H(this,r.components);var u=new q(this);new S(this),n.beforeLoad(n.el,n),u.compile({el:this.el,data:this.data,onDone:function(){n.loaded(n.el,n)}}),P.observe(this.el,(function(e){var t=e.mutation;!1===e.element.isConnected&&(n.destroyed(n.el,n),t.disconnect())})),this.delimiters={add:a.add,remove:a.remove,get:function(){return a.delimiters}},w.head.querySelector("link[rel~='icon']")||y("link",(function(e){e.rel="icon",e.type="image/png",e.href="https://afonsomatelias.github.io/assets/bouer/img/short.png"})).appendTo(w.head)}return e.prototype.toJsObj=function(e,t,r){return q.singleton.toJsObj(e,t,r)},e.prototype.setData=function(e,r){return i(e)?null!==r&&i(r)?(r=this.data,M.transform(e),m(Object.keys(e),(function(t){return d(r,e,t)})),r):t.error('Invalid targetObject value, expected an "Object Literal" and got "'+typeof r+'".'):t.error('Invalid inputData value, expected an "Object Literal" and got "'+typeof e+'".')},e.prototype.beforeMount=function(e,t){},e.prototype.mounted=function(e,t){},e.prototype.beforeLoad=function(e,t){},e.prototype.loaded=function(e,t){},e.prototype.destroyed=function(e,t){},e}()}));
