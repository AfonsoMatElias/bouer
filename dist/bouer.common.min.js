/*!
 * Bouer.js v3.0.0
 * Copyright Easy.js 2018-2020 | 2021-2021 Afonso Matumona
 * Released under the MIT License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function n(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function r(e,t){if(!e)return Promise.reject(new Error("Invalid Url"));var n=function(e,n){var r=(t||{})[e];return r||n},r=n("headers",{}),o=n("method","get"),i=n("body",void 0),a=function(e){if(!(!j.documentMode||e.match(/^(get|post)$/i)&&R.XMLHttpRequest))return new R.ActiveXObject("Microsoft.XMLHTTP");if(R.XMLHttpRequest)return new R.XMLHttpRequest;throw new Error("This browser does not support XMLHttpRequest.")}(o);return new Promise((function(t,n){var u=function(t,n,r,o,i){t({url:e,ok:n,status:r,statusText:o.statusText||"",headers:o.getAllResponseHeaders(),json:function(){return Promise.resolve(JSON.stringify(i))},text:function(){return Promise.resolve(i)}})};a.open(o,e,!0),y(Object.keys(r),(function(e){a.setRequestHeader(e,r[e])})),a.onload=function(){var n="response"in a?a.response:a.responseText,r=1223===a.status?204:a.status;0===r&&(r=n?200:"file"===k(e).protocol?404:0),u(t,r>=200&&r<400,r,a,n)},a.onerror=function(){u(n,!1,a.status,a,"")},a.onabort=function(){u(n,!1,a.status,a,"")},a.ontimeout=function(){u(n,!1,a.status,a,"")},a.send(i)}))}function o(e,t,n){for(var r="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=!1,i="",a=0;a<(e||8);a++){var u=Math.floor(Math.random()*r.length);i+=o?f(r[u]):r[u],o=!o}return(t||"")+i+(n||"")}function i(e){return void 0===e||null==e}function a(e){return"object"==typeof e&&"[object Object]"===String(e)}function u(e){return void 0!==e&&"string"==typeof e}function s(e){return!e||!a(e)||0===Object.keys(e).length}function c(e){return"function"==typeof e}function l(e){return e?e.trim():e}function d(e,t){return e.substring(0,t.length)===t}function f(e){return e.toLowerCase()}function p(e){return function(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}(e)?String(e):a(e)||Array.isArray(e)?JSON.stringify(e):c(e.toString)?e.toString():String(e)}function h(e,t,n){return Object.defineProperty(e,t,n),e}function v(e,t,n){h(e,n,m(t,n))}function m(e,t){return Object.getOwnPropertyDescriptor(e,t)}function b(e,t,n){void 0===n&&(n=!1);var r=null;if(!e)return null;for(var o=0,a=t;o<a.length;o++){var u=a[o];if(r=e.attributes[u])break}return!i(r)&&n&&e.removeAttribute(r.name),r}function y(e,t,n){for(var r=0;r<e.length;r++)c(t)&&t.call(n,e[r],r)}function g(e,t,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];c(t)&&t.call(n,i,o)&&r.push(i)}return r}function x(e){return e?[].slice.call(e):[]}function N(e,t){var n=j.createElement(e);c(t)&&t(n,j);var r={appendTo:function(e){return e.appendChild(n),r},build:function(){return n}};return r}function w(e,t){var n=j.createElement(e);c(t)&&t(n,j);var r={appendTo:function(e){return e.appendChild(n),r},build:function(){return n}};return r}function A(e,t){y(Object.keys(e),(function(n){var r=e[n];if(n in t)return a(r)?A(r,t[n]):t[n]=r;v(t,e,n)}))}function k(e){var t=e;"documentMode"in j&&(T.setAttribute("href",t),t=T.href),T.setAttribute("href",t);var n=T.hostname;!("[::1]"===T.hostname)&&n.indexOf(":")>-1&&(n="["+n+"]");var r={href:T.href,baseURI:T.baseURI,protocol:T.protocol?T.protocol.replace(/:$/,""):"",host:T.host,search:T.search?T.search.replace(/^\?/,""):"",hash:T.hash?T.hash.replace(/^#/,""):"",hostname:n,port:T.port,pathname:"/"===T.pathname.charAt(0)?T.pathname:"/"+T.pathname,origin:""};return r.origin=r.protocol+"://"+r.host,r}function C(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.split(/\/\//),o=r.length>1?r[0]+"//":"",i=""===o?r[0]:r[1],a=i.split(/\//),u=[];return y(a,(function(e){return l(e)?u.push(e):null})),y(t,(function(e){return y(e.split(/\//),(function(e){return l(e)?u.push(e):null}))})),o+u.join("/")}function E(e,t){var n=function(e){return"../"===e.substring(0,3)},r=function(e){var t=e.split("/");return/\.html$|\.css$|\.js$/gi.test(e)&&t.pop(),{relative:t.join("/"),parts:t}};if("./"===t.substring(0,2))return r(e).relative+t.substring(1);if(n(t)){var o=r(e).parts;return o.push(function e(t){return n(t)?(o.pop(),e(t.substring(3))):t}(t)),o.join("/")}return t}function O(e){return e?(e.stack="",e):"Unknown Error"}var j=document,R=globalThis,T=w("a").build(),I={skip:"e-skip",build:"e-build",array:"e-array",if:"e-if",elseif:"e-else-if",else:"e-else",show:"e-show",req:"e-req",for:"e-for",data:"data",def:"e-def",wait:"wait-data",content:"e-content",bind:"e-bind",property:"e-",skeleton:"e-skeleton",route:"route-view",href:":href",entry:"e-entry",on:"on:",silent:"silent",slot:"slot",ref:"ref",put:"e-put",builtInEvents:{add:"add",compile:"compile",request:"request",response:"response",fail:"fail",done:"done"},check:function(e,t){return d(e.nodeName,t)},isConstant:function(e){var t=this;return-1!==Object.keys(this).map((function(e){return t[e]})).indexOf(e)}},V=function(){function e(){}return e.Register=function(e){var t,n,r=e,o=r.bouer,i=r.constructor.name;if(!(n=this.container.get(o)))return this.container.set(o,((t={})[i]=e,t));n[i]=e},e.Resolve=function(e,t){if(e.isDestroyed)throw new Error("Application already disposed.");var n=this.container.get(e);if(!n)throw new Error("Application not registered!");return n[t.name]},e.Dispose=function(e){return this.container.delete(e)},e.GetId=function(){return e.identifierController++},e.identifierController=1,e.container=new Map,e}(),D=function(){function e(){}return e.run=function(e,t){var n=setInterval((function(){e((function(){return clearInterval(n)}))}),t||1e3)},e}(),L=function(){function e(){}return e.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console.log.apply(console,n([e.prefix],t,!1))},e.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console.error.apply(console,n([e.prefix],t,!1))},e.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console.warn.apply(console,n([e.prefix],t,!1))},e.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console.info.apply(console,n([e.prefix],t,!1))},e.prefix="[Bouer]",e}(),S=function(){this.isBouer=!0},M=function(){function e(){}return e.obj=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return y(e,(function(e){i(e)||y(Object.keys(e),(function(t){i(e[t])||v(n,e,t)}))})),n},e.array=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return y(e,(function(e){if(!i(e))return Array.isArray(e)?void y(Object.keys(e),(function(t){var r=e[t];i(r)||(Array.isArray(r)?[].push.apply(n,r):n.push(r))})):n.push(e)})),n},e}(),q=function(e){function n(t,n){var r=e.call(this)||this;return r.delimiters=[],r.bouer=n,r.delimiters=t,V.Register(r),r}return t(n,e),n.prototype.add=function(e){this.delimiters.push(e)},n.prototype.remove=function(e){var t=this.delimiters.findIndex((function(t){return t.name===e}));this.delimiters.splice(t,1)},n.prototype.run=function(e){var t=this;if(i(e)||""===l(e))return[];var n=null,r=function(e,r){for(var o=0;o<t.delimiters.length;o++){var i=t.delimiters[o],a=e.match(RegExp(i.delimiter.open+"([\\S\\s]*?)"+i.delimiter.close,r||""));if(a)return n=i,a}},o=r(e,"g");return o?o.map((function(e){var t=r(e);return{field:t[0],expression:l(t[1]),delimiter:n}})):[]},n}(S),_=function(e){function n(t){var n=e.call(this)||this;return n.bouer=t,n.global=n.createWindow(),V.Register(n),n}return t(n,e),n.prototype.createWindow=function(){var e;return w("iframe",(function(t,n){t.style.display="none!important",n.body.appendChild(t),e=t.contentWindow,n.body.removeChild(t)})),delete e.name,e},n.prototype.execRaw=function(e,t){try{var n="(function(){ "+e+" }).apply(this, arguments)";R.Function(n).apply(t||this.bouer)}catch(e){L.error(O(e))}},n.prototype.exec=function(e){var t=this,n=e.data,r=e.args,o=e.expression,i=e.isReturn,a=e.aditional,u=e.context,s=this.global,c={};u=u||this.bouer;var l=M.obj(a||{});y(Object.keys(n),(function(e){v(l,n,e)})),y(Object.keys(this.bouer.globalData),(function(e){if(e in l)return L.warn('It was not possible to use the globalData property "'+e+'" because it already defined in the current scope.');v(l,t.bouer.globalData,e)}));var d,f=Object.keys(l);y(f,(function(e){delete s[e],e in s&&!0===m(s,e).configurable&&(c[e]=s[e]),e in c&&(s[e]=l[e]),v(s,l,e)}));try{var p='return(function(){"use strict"; '+(!1===i?"":"return")+" "+o+" }).apply(this, arguments)";d=this.global.Function(p).apply(u,r)}catch(e){L.error(O(e))}return y(f,(function(e){return delete s[e]})),d},n}(S),P=function(e){function n(t){var n=e.call(this)||this;return n.$events={},n.input=w("input").build(),n.bouer=t,n.evaluator=V.Resolve(n.bouer,_),V.Register(n),n.cleanup(),n}return t(n,e),n.prototype.handle=function(e,t,n){var r,o=this,a=e.ownerElement||e.parentNode,u=e.nodeName;if(i(a))return L.error("Invalid ParentElement of \u201c"+u+"\u201d");var s=l(null!==(r=e.nodeValue)&&void 0!==r?r:""),d=u.substring(I.on.length).split("."),f=d[0];if(d.shift(),""===s)return L.error("Expected an expression in the \u201c"+u+"\u201d and got an <empty string>.");a.removeAttribute(u);var p=function(e){var r={prevent:"preventDefault",stop:"stopPropagation"};y(d,(function(t){var n=r[t];e[n]&&e[n]()}));var i=[e],a=o.evaluator.exec({data:t,expression:s,args:i,aditional:{event:e},context:n});if(c(a))try{a.apply(n,i)}catch(e){L.error(O(e))}},h={},v=["capture","once","passive"];y(d,(function(e){e=e.toLocaleLowerCase(),-1!==v.indexOf(e)&&(h[e]=!0)})),"on"+f in this.input?a.addEventListener(f,p,h):this.on({eventName:f,callback:p,modifiers:h,context:n,attachedNode:a})},n.prototype.on=function(e){var t=this,n=e.eventName,r=e.callback,o=e.context,i=e.attachedNode,a=e.modifiers,u={eventName:n,callback:function(e){return r.apply(o||t.bouer,[e])},attachedNode:i,modifiers:a,emit:function(e){return t.emit({eventName:n,attachedNode:i,init:(e||{}).init,once:(e||{}).once})}};return this.$events[n]||(this.$events[n]=[]),this.$events[n].push(u),u},n.prototype.off=function(e){var t=e.eventName,n=e.callback,r=e.attachedNode;this.$events[t]&&(this.$events[t]=g(this.$events[t],(function(e){return r?e.attachedNode===r:!(e.eventName===t&&n==e.callback)})))},n.prototype.emit=function(e){var t=this,n=e.eventName,r=e.init,o=e.once,i=e.attachedNode,a=this.$events[n];if(a){var u=function(e,t){e.addEventListener(n,t,{once:!0}),e.dispatchEvent(new CustomEvent(n,r))};y(a,(function(e){var s=e.attachedNode;if(i){if(s!==i)return;return u(s,e.callback)}if(s)return u(s,e.callback);e.callback.call(t.bouer,new CustomEvent(n,r)),!0===(null!=o&&o)&&a.splice(a.indexOf(e),1)}))}},n.prototype.cleanup=function(){var e=this;D.run((function(){y(Object.keys(e.$events),(function(t){e.$events[t]=g(e.$events[t],(function(e){return!e.attachedNode||(!!e.attachedNode.isConnected||void 0)}))}))}),1e3)},n}(S),$=function(){function e(){}return e.on=function(t,n){return this[t].push(n),{eventName:t,callback:n,off:function(){return e.off(t,n)}}},e.off=function(e,t){var n=this[e];return n.splice(n.indexOf(t),1),!0},e.once=function(t,n){var r={},o=e.on(t,(function(e,t,n){r.onemit&&r.onemit(e)}));try{n(r)}catch(e){L.error(O(e))}finally{e.off(t,o.callback)}},e.emit=function(e,t){try{y(this[e],(function(e){return e(t)}))}catch(e){L.error(O(e))}},e.BeforeGet=[],e.AfterGet=[],e.BeforeSet=[],e.AfterSet=[],e}(),H=function(e){function n(t,n,r){var o=e.call(this)||this;return o.destroy=function(){var e=o.reactive.watches.indexOf(o);-1!==e&&o.reactive.watches.splice(e,1),o.onDestroy&&o.onDestroy()},o.reactive=t,o.property=t.propertyName,o.callback=n,r&&(o.node=r.node,o.onDestroy=r.onDestroy),o}return t(n,e),n}(S),G=function(e){function n(t){var r=e.call(this)||this;if(r.watches=[],r.get=function(){$.emit("BeforeGet",r),r.propertyValue=r.isComputed?r.computedGetter():r.propertyValue;var e=r.propertyValue;return $.emit("AfterGet",r),e},r.set=function(e){var t=r.propertyValue;if(t!==e){if($.emit("BeforeSet",r),a(e)||Array.isArray(e)){if(typeof r.propertyValue!=typeof e)return L.error("Cannot set \u201c"+typeof e+"\u201d in \u201c"+r.propertyName+"\u201d property.");if(Array.isArray(e)){n.transform({inputObject:e,reactiveObj:r,context:r.context});var o=r.propertyValue;o.splice(0,o.length),o.push.apply(o,e)}else a(e)&&(e instanceof Node?r.propertyValue=e:(n.transform({inputObject:e,context:r.context}),i(r.propertyValue)?r.propertyValue=e:A(e,r.propertyValue)))}else r.propertyValue=e;r.isComputed&&r.computedSetter&&r.computedSetter(e),$.emit("AfterSet",r),y(r.watches,(function(e){return e.callback(r.propertyValue,t)}))}},r.propertyName=t.propertyName,r.propertySource=t.sourceObject,r.context=t.context,r.propertyDescriptor=m(r.propertySource,r.propertyName),r.propertyValue=r.propertyDescriptor.value,r.isComputed="function"==typeof r.propertyValue&&"$computed"===r.propertyValue.name,r.isComputed){var o=r.propertyValue.call(r.context);if(("get"in o||c(o))&&(r.computedGetter=o.get||o),"set"in o&&(r.computedSetter=o.set),!r.computedGetter)throw new Error("Computed property must be a function \u201cfunction $computed(){...}\u201d that returns a function for \u201cgetter only\u201d or an object with a \u201cget\u201d and/or \u201cset\u201d function");r.propertyValue=void 0}return"function"!=typeof r.propertyValue||r.isComputed||(r.propertyValue=r.propertyValue.bind(r.context)),r}return t(n,e),n.prototype.onChange=function(e,t){var n=new H(this,e,{node:t});return this.watches.push(n),n},n.transform=function(e){var t=e.context,r=function(e,o,u,s){if(Array.isArray(e)){if(null==s)return L.warn("Cannot transform this array to a reactive one because no reactive objecto was provided"),e;if(-1!==o.indexOf(e))return e;o.push(e);var c=e,l={},d=c.__proto__=Object.create(Array.prototype);return y(["push","pop","unshift","shift","splice"],(function(e){l[e]=c[e].bind(c),d[e]=function(){var t=c.slice();switch(e){case"push":case"unshift":y(x(arguments),(function(e){(a(e)||Array.isArray(e))&&r(e,o,u)}))}var n=l[e].apply(c,arguments);return y(s.watches,(function(e){return e.callback(c,t)})),n}})),c}return a(e)?(-1!==o.indexOf(e)||(o.push(e),y(Object.keys(e),(function(s){var c=e;if(!i(m(e,s).value)){var l=c[s];if(!(l instanceof Object&&(l.isBouer||l instanceof Node))){var d=new n({propertyName:s,sourceObject:e,context:t});h(e,s,d),a(l)?r(l,o,u):Array.isArray(l)&&(r(l,o,u,d),y(l,(function(e){return r(e,o,u)})))}}})),o.splice(o.indexOf(e),1),u.push(e)),e):e};return r(e.inputObject,[],[],e.reactiveObj)},n}(S),B=function(e){function n(t){var n=e.call(this)||this;return n.defaultPage=void 0,n.notFoundPage=void 0,n.routeView=null,n.activeAnchors=[],n.base=null,n.bouer=t,n.routeView=n.bouer.el.querySelector("[route-view]"),V.Register(n),n}return t(n,e),n.prototype.init=function(){var e=this;if(!i(this.routeView)){this.routeView.removeAttribute("route-view"),this.base="/";var t=j.head.querySelector("base");if(t){var n=t.attributes.getNamedItem("href");if(!n)return L.error('The href="/" attribute is required in base element.');this.base=n.value}this.defaultPage&&this.navigate(j.location.href),R.addEventListener("popstate",(function(t){t.preventDefault(),e.navigate(t.state||location.href,!1)}))}},n.prototype.navigate=function(e,t){var n,r=this;if(this.routeView){if(i(e))return L.log("Invalid url provided to the navigation method.");var o=k(e=l(e)),a=null===(n=(this.bouer.config||{}).usehash)||void 0===n||n,u=(a?o.hash:o.pathname).split("?")[0];"/"===u[u.length-1]&&(u=u.substring(0,u.length-1));var s=this.toPage(u);if(this.clear(),s&&(s||!e.endsWith(".html"))){var c=N(s.name).appendTo(this.routeView).build();j.title=s.title||j.title,(null==t||t)&&this.pushState(o.href,j.title);var d=C(o.baseURI,a?"#":"",s.route);V.Resolve(this.bouer,X).order(c,{},(function(e){e.on("loaded",(function(){r.markActiveAnchors(d)}))}))}}},n.prototype.pushState=function(e,t){e=k(e).href,j.location.href!==e&&R.history.pushState(e,t||"",e)},n.prototype.popState=function(e){i(e)&&(e=-1),R.history.go(e)},n.prototype.toPage=function(e){return""===e||"/"===e||e==="/"+C((this.base,"index.html"))?this.defaultPage:V.Resolve(this.bouer,X).find((function(t){if(!t.route)return!1;var n=t.route.replace(/{(.*?)}/gi,"[\\S\\s]{1,}");return!!Array.isArray(new RegExp("^"+n+"$").exec(e))}))||this.notFoundPage},n.prototype.markActiveAnchors=function(e){var t=this,n=(this.bouer.config||{}).activeClassName||"active-link",r=this.bouer.el.querySelectorAll("a");y(this.activeAnchors,(function(e){return e.classList.remove(n)})),y([].slice.call(this.bouer.el.querySelectorAll("a."+n)),(function(e){return e.classList.remove(n)})),this.activeAnchors=[],y(x(r),(function(r){r.href.split("?")[0]===e.split("?")[0]&&(r.classList.add(n),t.activeAnchors.push(r))}))},n.prototype.clear=function(){this.routeView.innerHTML=""},n.prototype.configure=function(e){return!0!==e.isDefault||i(this.defaultPage)?!0!==e.isNotFound||i(this.notFoundPage)?(!0===e.isDefault&&(this.defaultPage=e),void(!0===e.isNotFound&&(this.notFoundPage=e))):L.warn("There are multiple \u201cNotFound Page\u201d provided, check the \u201c"+e.route+"\u201d route."):L.warn("There are multiple \u201cDefault Page\u201d provided, check the \u201c"+e.route+"\u201d route.")},n}(S),U=function(e){function n(t){var n=e.call(this)||this;return n.url=t||j.location.href,n}return t(n,e),n.prototype.params=function(e){var t=this,n={};if(e&&u(e)){var r=this.url.split("?")[0].split("/").reverse();""===r[0]&&r.shift(),y(e.split("/").reverse(),(function(e,t){var o=RegExp("{([\\S\\s]*?)}").exec(e);Array.isArray(o)&&(n[o[1]]=r[t])}))}return function(){var e=t.url.split("?")[1];if(!e)return t;y(e.split("&"),(function(e){var t=e.split("=");n[t[0]]=(t[1]||"").split("#")[0]}))}(),n},n.prototype.add=function(e){var t=[];y(Object.keys(e),(function(n){t.push(n+"="+e[n])}));var n=t.join("&");return this.url.includes("?")?"&"+n:"?"+n},n.prototype.remove=function(e){return e},n}(S),F=function(e){function n(t){var n=e.call(this)||this;n.prefetch=!1,n.title=void 0,n.route=void 0,n.isDefault=void 0,n.isNotFound=void 0,n.isDestroyed=!1,n.el=void 0,n.bouer=void 0,n.children=[],n.assets=[],n.events=[];var r=void 0,o=void 0;return u(t)?o=t:(r=t.name,o=t.path,Object.assign(n,t)),n.name=r,n.path=o,n.data=G.transform({context:n,inputObject:n.data||{}}),n}return t(n,e),n.prototype.requested=function(e){},n.prototype.created=function(e){},n.prototype.beforeMount=function(e){},n.prototype.mounted=function(e){},n.prototype.beforeLoad=function(e){},n.prototype.loaded=function(e){},n.prototype.beforeDestroy=function(e){},n.prototype.destroyed=function(e){},n.prototype.blocked=function(e){},n.prototype.failed=function(e){},n.prototype.export=function(e){var t=this;return a(e)?y(Object.keys(e),(function(n){t.data[n]=e[n],v(t.data,e,n)})):L.log('Invalid object for component.export(...), only "Object Literal" is allowed.')},n.prototype.destroy=function(){var e=this;if(!this.el)return!1;if(!this.isDestroyed){this.keepAlive||(this.isDestroyed=!0),this.emit("beforeDestroy");var t=this.el.parentElement;t&&t.removeChild(this.el),y(this.events,(function(t){return e.off(t.eventName,t.callback)})),this.events=[],this.emit("destroyed")}},n.prototype.params=function(){return(new U).params(this.route)},n.prototype.emit=function(e,t){V.Resolve(this.bouer,P).emit({eventName:e,attachedNode:this.el,init:t})},n.prototype.on=function(e,t){var n="requested"==e||"failed"==e||"blocked"==e?this.bouer:this,r=V.Resolve(this.bouer,P).on({eventName:e,callback:t,attachedNode:this.el,context:n});return this.events.push(r),r},n.prototype.off=function(e,t){V.Resolve(this.bouer,P).off({eventName:e,callback:t,attachedNode:this.el}),this.events=g(this.events,(function(n){return!(n.eventName==e&&n.callback==t)}))},n.prototype.addAssets=function(e){var t=[],n={js:"script",css:"link",style:"link"};y(e,(function(e,r){if(!e.src||!l(e.src))return L.error("Invalid asset \u201csrc\u201d, in assets["+r+"].src");var o="";if(e.type)e.type=f(e.type),o=n[e.type]||e.type;else{var i=e.src.split(".");if(!(o=n[f(i[i.length-1])]))return L.error("Couldn't find out what type of asset it is, provide the \u201ctype\u201d explicitly at assets["+r+"].type")}var a=N(o,(function(t){var n;if((null===(n=e.scoped)||void 0===n||n)&&t.setAttribute("scoped","true"),"link"===f(o))t.setAttribute("href",e.src),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css");else t.setAttribute("src",e.src)})).build();t.push(a)})),this.assets.push.apply(this.assets,t)},n}(S),X=function(e){function n(t){var n=e.call(this)||this;return n.requests={},n.components={},n.stylesController={},n.bouer=t,n.delimiter=V.Resolve(n.bouer,q),n.eventHandler=V.Resolve(n.bouer,P),V.Register(n),n}return t(n,e),n.prototype.check=function(e){return e in this.components},n.prototype.request=function(e,t){var n=this;if(!i(this.requests[e]))return this.requests[e].push(t);this.requests[e]=[t];var o=k(T.baseURI),a=null!=j.head.querySelector("base");r(C(a?o.baseURI:o.origin,e),{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(t){y(n.requests[e],(function(n){n.success(t,e)})),delete n.requests[e]})).catch((function(t){a||L.warn('It seems like you are not using the \u201c<base href="/base/components/path/" />\u201d element, try to add as the first child into \u201c<head></head>\u201d element.'),y(n.requests[e],(function(n){n.fail(t,e)})),delete n.requests[e]}))},n.prototype.prepare=function(e,t){var n=this;y(e,(function(e){var r,a=e.constructor.name,u="IComponent"===a||"Component"===a||"Object"===a;if(i(e.name)&&(e.name=f(u?o(9,"component-"):e.constructor.name)),i(e.path)&&i(e.template))return L.warn("The component with name \u201c"+e.name+"\u201d"+e.route?" and the route \u201c"+e.route+"\u201d":" has not \u201cpath\u201d or \u201ctemplate\u201d property defined, then it was ignored.");if(!i(n.components[e.name]))return L.warn("The component name \u201c"+e.name+"\u201d is already define, try changing the name.");Array.isArray(e.children)&&n.prepare(e.children,e),i(e.route)||(e.route="/"+C(i(t)?"":t.route,e.route)),V.Resolve(n.bouer,B).configure(n.components[e.name]=e);var s=function(t){t&&n.request(e.path,{success:function(t){e.template=t},fail:function(e){L.error(O(e))}})};return i(e.prefetch)?null===(r=(n.bouer.config||{}).prefetch)||void 0===r||r?s(e.path):void 0:!0===e.prefetch?s(e.path):void 0}))},n.prototype.order=function(e,t,n){var r=this,o=f(e.nodeName),i=this.components,a=i[o];if(!a)return L.error("No component with name \u201c"+o+"\u201d registered.");var u=a,s=u,c=function(){if(u.template){var a=u instanceof F?u:new F(u);return a.bouer=r.bouer,r.insert(e,a,t,n),void(!0===u.keepAlive&&(i[o]=u))}var c=r.addComponentEventAndEmitGlobalEvent("requested",e,u,r.bouer);c&&c.emit(),r.request(u.path,{success:function(a){var c=u instanceof F?u:new F(u);s.template=c.template=a,c.bouer=r.bouer,r.insert(e,c,t,n),!0===u.keepAlive&&(i[o]=u)},fail:function(e){L.error("Failed to request <"+o+"></"+o+"> component with path \u201c"+u.path+"\u201d."),L.error(O(e)),"function"==typeof s.failed&&s.failed(new CustomEvent("failed"))}})};if(s.restrictions&&s.restrictions.length>0){var l=[],d=s.restrictions.map((function(e){var t=e.call(r.bouer,u);return!1===t?l.push(e):t instanceof Promise&&t.then((function(t){!1===t&&l.push(e)})).catch((function(){return l.push(e)})),t})),p=this.addComponentEventAndEmitGlobalEvent("blocked",e,u,this.bouer),h=function(){return p.emit({detail:{component:u.name,message:"Component \u201c"+u.name+"\u201d blocked by restriction(s)",blocks:l}})};return Promise.all(d).then((function(e){e.every((function(e){return 1==e}))?c():h()})).catch((function(){return h()}))}return c()},n.prototype.find=function(e){for(var t=Object.keys(this.components),n=0;n<t.length;n++){var r=this.components[t[n]];if(e(r))return r}return null},n.prototype.addComponentEventAndEmitGlobalEvent=function(e,t,n,r){var o=n[e];if(this.eventHandler.emit({eventName:"component:"+e,init:{detail:{component:n}}}),"function"!=typeof o)return{emit:function(){}};var i=this.eventHandler.on({eventName:e,callback:function(e){return o.call(n,e)},attachedNode:t,modifiers:{once:!0},context:r||n}).emit;return{emit:function(e){return i({init:e})}}},n.prototype.insert=function(e,t,n,u){var s,l=this,d=f(e.nodeName),p=e.parentElement;if(e.isConnected&&p){if(i(t.template))return L.error("The <"+d+"></"+d+"> component is not ready yet to be inserted.");var m=N("SlotContainer",(function(t){t.innerHTML=e.innerHTML,e.innerHTML=""})).build();if((!1===(e.hasAttribute("keep-alive")||null!==(s=t.keepAlive)&&void 0!==s&&s)||i(t.el))&&w("body",(function(e){return e.innerHTML=t.template,y([].slice.call(e.children),(function(n){-1!==["SCRIPT","LINK","STYLE"].indexOf(n.nodeName)&&(t.assets.push(n),e.removeChild(n))})),0===e.children.length?L.error("The component <"+d+"></"+d+"> seems to be empty or it has not a root element. Example: <div></div>, to be included."):e.children.length>1?L.error("The component <"+d+"></"+d+"> seems to have multiple root element, it must have only one root."):(t.el=e.children[0],l.addComponentEventAndEmitGlobalEvent("created",t.el,t,l.bouer),void t.emit("created"))})),!i(t.el)){c(u)&&u(t);var b=t.el;y(x(e.attributes),(function(r){if(e.removeAttribute(r.name),"class"===r.nodeName)return e.classList.forEach((function(e){b.classList.add(e)}));if("data"===r.nodeName){if(0!==l.delimiter.run(r.value).length)return L.error("The \u201cdata\u201d attribute cannot contain delimiter, source element: <"+d+"></"+d+">.");var o={},i=M.obj(n,{$data:n}),u=$.on("AfterGet",(function(e){o[e.propertyName]=void 0,h(o,e.propertyName,e)}));if(""===r.value)o=M.obj(l.bouer.data);else{var s=V.Resolve(l.bouer,_).exec({data:i,expression:r.value,context:l.bouer});if(!a(s))return L.error("Expected a valid Object Literal expression in \u201c"+r.nodeName+"\u201d and got \u201c"+r.value+"\u201d.");y(Object.keys(s),(function(e){e in o||(o[e]=s[e])}))}return u.off(),G.transform({context:t,inputObject:o}),y(Object.keys(o),(function(e){v(t.data,o,e)}))}b.attributes.setNamedItem(r)}));var A=t.init;c(A)&&A.call(t),this.addComponentEventAndEmitGlobalEvent("beforeMount",t.el,t),t.emit("beforeMount"),p.replaceChild(b,e);var k={};b.classList.forEach((function(e){return k[e]=!0}));var C=function(e,t){var n="STYLE"===e.nodeName,r=[];if(e.sheet){for(var o=e.sheet.cssRules,i=0;i<o.length;i++){var a=o.item(i);if(a){var u=a;if(u.selectorText){var s=u.selectorText.substring(1),c=k[s]?"":" ",l="."+t,d=u.selectorText.split(" ");d[0]===f(b.tagName)&&d.shift(),u.selectorText=l+c+d.join(" ")}n&&r.push(u.cssText)}}n&&(e.innerText=r.join(" "))}},R=g(t.assets,(function(e){return"script"===f(e.nodeName)})),T=g(t.assets,(function(e){return"script"!==f(e.nodeName)})),I="component-style";y(T,(function(e){var n=e.cloneNode(!0);if(n instanceof HTMLLinkElement){var r="/"===t.path[0]?t.path.substring(1):t.path;n.href=E(r,n.getAttribute("href")||"")}if(l.stylesController[d]){var i=l.stylesController[d];-1===i.elements.indexOf(b)&&(i.elements.push(b),y(i.styles,(function(e){b.classList.add(e.getAttribute(I))})))}else{var a=o(7,"bouer-s");if(n.setAttribute(I,a),n instanceof HTMLLinkElement&&n.hasAttribute("scoped")&&(n.onload=function(e){return C(e.target,a)}),l.stylesController[d]={styles:[j.head.appendChild(n)],elements:[b]},n.hasAttribute("scoped"))return b.classList.add(a),n instanceof HTMLStyleElement?C(n,a):void 0}}));var S=function(e){try{V.Resolve(l.bouer,_).execRaw(e||"",t),l.addComponentEventAndEmitGlobalEvent("mounted",t.el,t),t.emit("mounted"),l.addComponentEventAndEmitGlobalEvent("beforeLoad",t.el,t),t.emit("beforeLoad"),V.Resolve(l.bouer,K).compile({data:G.transform({context:t,inputObject:t.data}),el:b,componentSlot:m,context:t,onDone:function(){l.addComponentEventAndEmitGlobalEvent("loaded",t.el,t),t.emit("loaded")}}),D.run((function(e){if(!t.el.isConnected){t.destroy(),e();var n=l.stylesController[t.name];if(n){var r=n.elements.indexOf(t.el);n.elements.splice(r,1),n.elements.length>0||(y(n.styles,(function(e){return y(x(j.head.children),(function(t){if(t===e)return j.head.removeChild(e)}))})),delete l.stylesController[t.name])}}}))}catch(e){L.error("Error in <"+d+"></"+d+"> component."),L.error(O(e))}};if(0===R.length)return S();var q=[],P=[],H=[],B={};return y(R,(function(e){if(""==e.src||e.innerHTML)q.push(e.innerHTML);else{var n="/"===t.path[0]?t.path.substring(1):t.path;e.src=E(n,e.getAttribute("src")||""),H.push(e.src)}})),0==H.length?S(q.join("\n\n")):y(H,(function(n,o){B[n]=!0,r(n,{headers:{"Content-Type":"text/plain"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(e){if(delete B[n],P[o]=e,0===Object.keys(B).length)return S(M.array(P,q).join("\n\n"))})).catch((function(r){r.stack="",L.error('Error loading the <script src="'+n+'"><\/script> in <'+d+"></"+d+"> component, remove it in order to be compiled."),L.log(r),l.addComponentEventAndEmitGlobalEvent("failed",e,t,l.bouer).emit()}))}))}}},n}(S),W=function(e){function n(t){var n=e.call(this)||this;return n.bouer=t,V.Register(n),n}return t(n,e),n.prototype.create=function(e){var t=j.createComment("e");return t.id=e||o(8),t},n}(S),J=function(e){function n(t){var n=e.call(this)||this;return n.middlewareConfigContainer={},n.run=function(e,t){var r=n.middlewareConfigContainer[e];if(!r)return(t.default||function(){})();for(var o=0,i=r[o],a=function(){var e=!1,n=i[t.type];if(n?t.action((function(t,r){Promise.resolve(n(t,(function(){e=!0}))).then((function(t){e||r.success(t),r.done()})).catch((function(t){e||r.fail(t),r.done()}))})):(t.default||function(){})(),0==e)return"break";i=r[++o]};null!=i;){if("break"===a())break}},n.register=function(e,t){n.middlewareConfigContainer[e]||(n.middlewareConfigContainer[e]=[]);var r={};t((function(e){return r.bind=e}),(function(e){return r.update=e})),n.middlewareConfigContainer[e].push(r)},n.bouer=t,V.Register(n),n}return t(n,e),n}(S),z=function(e){function n(t){var n=e.call(this)||this;return n.wait={},n.data={},n.req={},n.bouer=t,V.Register(n),n}return t(n,e),n.prototype.set=function(e,t,r){if("wait"===e)return L.warn("Only \u201cget\u201d is allowed for type of data");V.Resolve(this.bouer,n)[e][t]=r},n.prototype.get=function(e,t,r){var o=V.Resolve(this.bouer,n)[e][t];return!0===r&&this.unset(e,t),o},n.prototype.unset=function(e,t){delete V.Resolve(this.bouer,n)[e][t]},n}(S),Y=function(e){function n(t,n,r){var o=e.call(this)||this;return o.$custom={},o.errorMsgEmptyNode=function(e){return"Expected an expression in \u201c"+e.nodeName+"\u201d and got an <empty string>."},o.errorMsgNodeValue=function(e){var t;return"Expected an expression in \u201c"+e.nodeName+"\u201d and got \u201c"+(null!==(t=e.nodeValue)&&void 0!==t?t:"")+"\u201d."},o.compiler=n,o.context=r,o.bouer=n.bouer,o.$custom=t,o.evaluator=V.Resolve(o.bouer,_),o.delimiter=V.Resolve(o.bouer,q),o.binder=V.Resolve(o.bouer,Q),o.eventHandler=V.Resolve(o.bouer,P),o.comment=new W(o.bouer),o}return t(n,e),n.prototype.toOwnerNode=function(e){return e.ownerElement||e.parentNode},n.prototype.skip=function(e){e.nodeValue="true"},n.prototype.if=function(e,t){var n,r,o=this,i=this.toOwnerNode(e),a=i.parentElement;if(a){var u=[],s=this.comment.create(),c=e.nodeName,d=function(){};if(c!==I.elseif&&c!==I.else){var f=i,p=[],h=function(){if(null==f)return"break";var e=b(f,["e-if","e-else-if","e-else"]);if(!e)return"break";var i=u[0];return"e-if"===e.name&&i&&e.name===i.node.name?"break":"e-else"!==e.nodeName&&""===l(null!==(n=e.nodeValue)&&void 0!==n?n:"")?{value:L.error(v.errorMsgEmptyNode(e))}:0!==v.delimiter.run(null!==(r=e.nodeValue)&&void 0!==r?r:"").length?{value:L.error(v.errorMsgNodeValue(e))}:(u.push({node:e,element:f}),"e-else"===e.nodeName?(f.removeAttribute(e.nodeName),"break"):($.once("AfterGet",(function(n){n.onemit=function(t){-1===p.findIndex((function(e){return e.reactive.propertyName==t.propertyName}))&&p.push({attr:e,reactive:t})},o.evaluator.exec({data:t,expression:e.value,context:o.context})})),void f.removeAttribute(e.nodeName)))},v=this;do{var m=h();if("object"==typeof m)return m.value;if("break"===m)break}while(f=f.nextElementSibling);y(p,(function(e){o.binder.binds.push({isConnected:function(){return s.isConnected},watch:e.reactive.onChange((function(){return d()}),e.attr)})})),(d=function(){y(u,(function(e){e.element.parentElement&&(s.isConnected?a.removeChild(e.element):a.replaceChild(s,e.element))}));var e=u.map((function(e,t){var n=e.node.value;switch(e.node.name){case I.if:return"if("+n+"){ _cb("+t+"); }";case I.elseif:return"else if("+n+"){ _cb("+t+"); }";case I.else:return"else{ _cb("+t+"); }"}})).join(" ");o.evaluator.exec({data:t,isReturn:!1,expression:e,context:o.context,aditional:{_cb:function(e){var n=u[e].element;a.replaceChild(n,s),o.compiler.compile({el:n,data:t,context:o.context})}}})})()}}},n.prototype.show=function(e,t){var n,r=this,o=this.toOwnerNode(e),i=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");if(""===i)return L.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(i).length)return L.error(this.errorMsgNodeValue(e));var a=function(e){var n=r.evaluator.exec({data:t,expression:i,context:r.context});e.style.display=n?"":"none"},u=this.binder.create({data:t,node:e,isConnected:function(){return o.isConnected},fields:[{expression:i,field:i}],context:this.context,onUpdate:function(){return a(o)}});a(o),o.removeAttribute(u.node.nodeName)},n.prototype.for=function(e,t){var n,r=this,o=this.toOwnerNode(e),a=o.parentElement;if(a){var u=this.comment.create(),s=e.nodeName,c=l(null!==(n=e.nodeValue)&&void 0!==n?n:""),d=[],h=function(){};if(""===c)return L.error(this.errorMsgEmptyNode(e));if(!c.includes(" of ")&&!c.includes(" in "))return L.error("Expected a valid \u201cfor\u201d expression in \u201c"+s+"\u201d and got \u201c"+c+'\u201d.\nValid: e-for="item of items".');var v=this.delimiter.run(c);0!==v.length&&this.binder.create({node:e,data:t,fields:v,isReplaceProperty:!0,context:this.context,isConnected:function(){return u.isConnected},onUpdate:function(){return h()}}),o.removeAttribute(s);var m=o.cloneNode(!0);a.replaceChild(u,o);var b=function(e){var n=e.split("|").map((function(e){return l(e)})),o=n[0].replace(/\(|\)/g,"");n.shift();var i=" of ",a=o.split(i);a.length>1||(a=o.split(i=" in "));var u=a[0],s=a[1],c=u.split(",").map((function(e){return l(e)})),d="of"===l(i)?s:"Object.keys("+s+")";return{filters:n,type:i,leftHand:u,rightHand:s,sourceValue:r.evaluator.exec({data:t,expression:s,context:r.context}),leftHandParts:c,iterableExpression:d,isForOf:"of"===l(i)}},g=$.on("AfterGet",(function(t){r.binder.binds.push({isConnected:function(){return u.isConnected},watch:t.onChange((function(){return h()}),e)})})),x=b(c);g.off(),(h=function(){var n,o=(x=x||b(l(null!==(n=e.nodeValue)&&void 0!==n?n:""))).iterableExpression,h=x.leftHandParts,v=x.sourceValue,g=x.isForOf,N=x.filters;y(d,(function(e){e.parentElement&&a.removeChild(e)})),d=[],r.evaluator.exec({data:t,isReturn:!1,context:r.context,expression:"_for(_filters("+o+"), ($$itm, $$idx) => { _each($$itm, $$idx); })",aditional:{_for:y,_each:function(e,n){var o=M.obj(t),i=h[0],s=h[1]||"_index_or_value",c=h[2]||"_for_in_index";o[i]=e,o[s]=g?n:v[e],o[c]=n;var l=a.insertBefore(m.cloneNode(!0),u);r.compiler.compile({el:l,data:o,context:r.context,onDone:function(e){return r.eventHandler.emit({eventName:I.builtInEvents.add,attachedNode:e,once:!0})}}),d.push(l)},_filters:function(e){var n=M.array(e),o=function(e){return N.find((function(t){return t.substring(0,e.length)===e}))},a=o("where");if(a){var u=a.split(":").map((function(e){return l(e)}));1==u.length?L.error("Invalid \u201c"+s+"\u201d where expression \u201c"+c+"\u201d, at least a where-value and where-keys, or a filter-function must be provided"):n=function(e,n){var o=n[1],a=n[2];if(i(o)||""===o)return L.error("Invalid where-value in \u201c"+s+"\u201d with \u201c"+c+"\u201d expression."),e;if("function"==typeof(o=r.evaluator.exec({data:t,expression:o,context:r.context})))e=o(e);else{if(i(a)||""===a)return L.error("Invalid where-keys in \u201c"+s+"\u201d with \u201c"+c+"\u201d expression, at least one where-key to be provided."),e;var u=[];y(e,(function(e){for(var t=0,n=a.split(",").map((function(e){return l(e)}));t<n.length;t++){var i=n[t];if(!p(r.evaluator.exec({data:e,expression:i,context:r.context})).includes(o))break;u.push(e)}})),e=u}return e}(n,u)}var d=o("order");if(d){var h=d.split(":").map((function(e){return l(e)}));1==h.length?L.error("Invalid \u201c"+s+"\u201d order  expression \u201c"+c+"\u201d, at least the order type must be provided"):n=function(e,t,n){return t||(t="asc"),e.sort((function(e,r){var o=function(e,n){if(i(e)||i(n))return 0;switch(f(t)){case"asc":return e?1:-1;case"desc":return n?-1:1;default:return L.log("The \u201c"+t+"\u201d order type is invalid: \u201c"+c+"\u201d. Available types are: \u201casc\u201d  for order ascendent and \u201cdesc\u201d for order descendent."),0}};return n?o(e[n]>r[n],r[n]<e[n]):o(e>r,r<e)}))}(n,h[1],h[2])}return n}}}),x=null})()}},n.prototype.def=function(e,t){var n,r=this.toOwnerNode(e),o=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");if(""===o)return L.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(o).length)return L.error(this.errorMsgNodeValue(e));var i=this.evaluator.exec({data:t,expression:o,context:this.context});if(!a(i))return L.error("Expected a valid Object Literal expression in \u201c"+e.nodeName+"\u201d and got \u201c"+o+"\u201d.");this.bouer.set(i,t),r.removeAttribute(e.nodeName)},n.prototype.content=function(e){var t,n=this.toOwnerNode(e),r=l(null!==(t=e.nodeValue)&&void 0!==t?t:"");if(""===r)return L.error(this.errorMsgEmptyNode(e));n.innerText=r,n.removeAttribute(e.nodeName)},n.prototype.bind=function(e,t){var n,r=this.toOwnerNode(e),o=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");return""===o?L.error(this.errorMsgEmptyNode(e)):0!==this.delimiter.run(o).length?L.error(this.errorMsgNodeValue(e)):(this.binder.create({node:e,isConnected:function(){return r.isConnected},fields:[{field:o,expression:o}],context:this.context,data:t}),void r.removeAttribute(e.nodeName))},n.prototype.property=function(e,t){var n,r=this,o=this.toOwnerNode(e),i=l(null!==(n=e.nodeValue)&&void 0!==n?n:""),u=function(e){},s=function(e){var t;return"Invalid value, expected an Object/Object Literal in \u201c"+e.nodeName+"\u201d and got \u201c"+(null!==(t=e.nodeValue)&&void 0!==t?t:"")+"\u201d."};if(""===i)return L.error(s(e));if(0===this.delimiter.run(i).length){var c=this.evaluator.exec({data:t,expression:i,context:this.context});if(!a(c))return L.error(s(e));this.binder.create({data:t,node:e,isReplaceProperty:!1,isConnected:function(){return o.isConnected},fields:[{expression:i,field:i}],context:this.context,onUpdate:function(){return u(r.evaluator.exec({data:t,expression:i,context:r.context}))}}),o.removeAttribute(e.nodeName),(u=function(t){var n=e.nodeName.substring(I.property.length),r=o.attributes[n];if(r||(o.setAttribute(n,""),r=o.attributes[n]),y(Object.keys(t),(function(e){if(!t[e])return r.value=l(r.value.replace(e,""));r.value=r.value.includes(e)?r.value:l(r.value+" "+e)})),""===r.value)return o.removeAttribute(n)})(c)}},n.prototype.data=function(e,t){var n,r=this.toOwnerNode(e),o=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");if(0!==this.delimiter.run(o).length)return L.error("The \u201cdata\u201d attribute cannot contain delimiter.");r.removeAttribute(e.nodeName);var i={},u=M.obj(t,{$data:t}),s=$.on("AfterGet",(function(e){i[e.propertyName]=void 0,h(i,e.propertyName,e)}));if(""===o)i=M.obj(this.bouer.data);else{var c=this.evaluator.exec({data:u,expression:o,context:this.context});if(!a(c))return L.error("Expected a valid Object Literal expression in \u201c"+e.nodeName+"\u201d and got \u201c"+o+"\u201d.");y(Object.keys(c),(function(e){e in i||(i[e]=c[e])}))}$.off("AfterGet",s.callback);var d=e.nodeName.split(":")[1];return d&&(d=d.replace(/\[|\]/g,""),V.Resolve(this.bouer,z).set("data",d,i)),G.transform({context:this.context,inputObject:i}),this.compiler.compile({data:i,el:r,context:this.context})},n.prototype.href=function(e,t){var n,r,o=this,i=this.toOwnerNode(e),a=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");if(""===a)return L.error(this.errorMsgEmptyNode(e));i.removeAttribute(e.nodeName);var u=C(null===(r=(this.bouer.config||{}).usehash)||void 0===r||r?"#":"",a);i.setAttribute("href",u);var s=i.attributes.href,c=this.delimiter.run(a);0!==c.length&&this.binder.create({data:t,node:s,isConnected:function(){return i.isConnected},context:this.context,fields:c}),i.addEventListener("click",(function(e){e.preventDefault(),V.Resolve(o.bouer,B).navigate(s.value)}),!1)},n.prototype.entry=function(e,t){var n,r=this.toOwnerNode(e),o=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");return""===o?L.error(this.errorMsgEmptyNode(e)):0!==this.delimiter.run(o).length?L.error(this.errorMsgNodeValue(e)):(r.removeAttribute(e.nodeName),void V.Resolve(this.bouer,X).prepare([{name:o,template:r.outerHTML,data:t}]))},n.prototype.put=function(e,t){var n,r,o=this,i=this.toOwnerNode(e),a=l(null!==(n=e.nodeValue)&&void 0!==n?n:""),u=function(){};return""===a?L.error(this.errorMsgEmptyNode(e),"Direct <empty string> injection value is not allowed."):0!==this.delimiter.run(a).length?L.error("Expected an expression with no delimiter in \u201c"+e.nodeName+"\u201d and got \u201c"+(null!==(r=e.nodeValue)&&void 0!==r?r:"")+"\u201d."):(this.binder.create({data:t,node:e,isConnected:function(){return i.isConnected},fields:[{expression:a,field:a}],context:this.context,isReplaceProperty:!1,onUpdate:function(){return u()}}),i.removeAttribute(e.nodeName),void(u=function(){var n;if(i.innerHTML="",""!==(a=l(null!==(n=e.nodeValue)&&void 0!==n?n:""))){var r=N(a).appendTo(i).build();V.Resolve(o.bouer,X).order(r,t)}})())},n.prototype.req=function(e,t){var n,r=this,o=this.toOwnerNode(e),i=this.toOwnerNode(o),a=e.nodeName,u=l(null!==(n=e.nodeValue)&&void 0!==n?n:"");if(!u.includes(" of ")&&!u.includes(" as "))return L.error("Expected a valid \u201cfor\u201d expression in \u201c"+a+"\u201d and got \u201c"+u+'\u201d.\nValid: e-req="item of [url]".');var s,c=this.delimiter.run(u),d={},f=function(){},p={node:e,data:t,nodeName:a,nodeValue:u,fields:c,parent:o,value:u};0!==c.length&&(p=this.binder.create({data:t,node:e,fields:c,context:this.context,isReplaceProperty:!1,isConnected:function(){return i.isConnected},onUpdate:function(){return f()}})),o.removeAttribute(e.nodeName);var b=function(e){var n=o.attributes.getNamedItem(I.on+e);return n&&r.eventHandler.handle(n,t,r.context),{emit:function(t){r.eventHandler.emit({attachedNode:o,eventName:e,init:{detail:t}})}}},y=function(e){var t=e.split("|").map((function(e){return l(e)})),n=t.shift().replace(/\(|\)/g,""),r=" of ",o=n.split(r);return o.length>1||(o=n.split(r=" as ")),{filters:t,type:l(r),expression:l(n),variables:l(o[0]),path:l(o[1])}},g=function(e,t){return e?"data"in e?"of"!==t||Array.isArray(e.data)?"as"!==t||"object"==typeof e.data||(L.error('Using e-ref="... \u201cas\u201d ..." the response must be a list of items, and got \u201c'+typeof e.data+"\u201d."),!1):(L.error('Using e-ref="... \u201cof\u201d ..." the response must be a list of items, and got \u201c'+typeof e.data+"\u201d."),!1):(L.error("the return must contain the \u201cdata\u201d property. Example: { data: {} | [] }"),!1):(L.error("the return must be an object containing \u201cdata\u201d property. Example: { data: {} | [] }"),!1)},x=V.Resolve(this.bouer,J),N=(e.nodeName.split(":")[1]||"").replace(/\[|\]/g,"");(s=function(){var n=y(l(e.nodeValue||""));b(I.builtInEvents.request).emit(),x.run("req",{type:"bind",action:function(e){var i={success:function(e){!function(e){var i;if(g(e,n.type)){if(G.transform({context:r.context,inputObject:e}),b(I.builtInEvents.response).emit({response:e}),"data"in d)return d.data=e.data;if(d.data=void 0,v(d,e,"data"),N&&V.Resolve(r.bouer,z).set("req",N,e),"as"===n.type){var a=l(n.variables.split(",")[0].replace(/\(|\)/g,""));return r.compiler.compile({el:o,data:M.obj((i={},i[a]=e.data,i),t),context:r.context,onDone:function(e,t){b(I.builtInEvents.compile).emit({data:t})}})}if("of"===n.type){var u=n.expression.replace(n.path,"_response_");o.setAttribute(I.for,u),t._response_=void 0,h(t,"_response_",m(e,"data")),r.compiler.compile({el:o,data:t,context:r.context,onDone:function(e,t){b(I.builtInEvents.compile).emit({data:t})}})}}}(e)},fail:function(e){return b(I.builtInEvents.fail).emit({error:e})},done:function(){return b(I.builtInEvents.done).emit()}};e({binder:p,detail:{requestType:n.type,requestPath:n.path,reponseData:d}},i)}})})(),f=function(){var t=y(l(e.nodeValue||""));x.run("req",{type:"update",default:function(){s()},action:function(e){e({binder:p,detail:{requestType:t.type,requestPath:t.path,reponseData:d}},{success:function(e){g(e,t.type)&&(d.data=e.data)},fail:function(e){return b(I.builtInEvents.fail).emit({error:e})},done:function(){return b(I.builtInEvents.done).emit()}})}})}},n.prototype.wait=function(e){var t,n=this,r=this.toOwnerNode(e),o=l(null!==(t=e.nodeValue)&&void 0!==t?t:"");if(""===o)return L.error(this.errorMsgEmptyNode(e));if(0!==this.delimiter.run(o).length)return L.error(this.errorMsgNodeValue(e));r.removeAttribute(e.nodeName);var i=V.Resolve(this.bouer,z),a=i.wait[o];if(a){if(a.nodes.push(r),!a.data)return;return y(a.nodes,(function(e){n.compiler.compile({el:e,data:G.transform({context:n.context,inputObject:a.data}),context:n.context})}))}return i.wait[o]={nodes:[r]}},n.prototype.custom=function(e,t){var n,r,o,i=this.toOwnerNode(e),a=e.nodeName,u=l(null!==(n=e.nodeValue)&&void 0!==n?n:""),s=this.delimiter.run(u),c=this.$custom[a],d=this.binder.create({data:t,node:e,fields:s,isReplaceProperty:!1,context:this.context,isConnected:function(){return i.isConnected},onUpdate:function(){"function"==typeof c.update&&c.update(e,d)}});(null===(r=c.removable)||void 0===r||r)&&i.removeAttribute(a);var f=a.split(".");f.shift();var p=(a.split(":")[1]||"").split(".")[0];return d.modifiers=f,d.argument=p,"function"==typeof c.bind&&(null!==(o=c.bind(e,d))&&void 0!==o&&o)},n.prototype.skeleton=function(e){var t;""===l(null!==(t=e.nodeValue)&&void 0!==t?t:"")&&this.toOwnerNode(e).removeAttribute(e.nodeName)},n}(S),K=function(e){function n(t,n){var r=e.call(this)||this;return r.NODES_TO_IGNORE_IN_COMPILATION={SCRIPT:1,"#comment":8},r.bouer=t,r.directives=n,r.binder=V.Resolve(r.bouer,Q),r.delimiter=V.Resolve(r.bouer,q),r.eventHandler=V.Resolve(r.bouer,P),r.component=V.Resolve(r.bouer,X),V.Register(r),r}return t(n,e),n.prototype.compile=function(e){var t=this,n=e.el,r=e.context||this.bouer,o=e.data||this.bouer.data;if(!this.analize(n.outerHTML))return n;var i=new Y(this.directives||{},this,r),a=function(o,s){if(!(o.nodeName in t.NODES_TO_IGNORE_IN_COMPILATION)){if(o instanceof Element){if(I.skip in o.attributes)return i.skip(o);if(o.localName===I.slot&&e.componentSlot){var c=function(e,t){var r=function(e){var r=e.cloneNode(!0);n.insertBefore(r,t),a(r,s)};"SLOTCONTAINER"===e.nodeName?y(x(e.childNodes),(function(e){return r(e)})):r(e),n.removeChild(t)};if(o.hasAttribute("default"))return c(e.componentSlot,o);if(o.hasAttribute("name")){var l=o.attributes.getNamedItem("name");return function e(t){var n=t.getAttribute(I.slot);return n&&n===l.value?(t.removeAttribute(I.slot),c(t,o)):0===t.children.length?null:void y(x(t.children),(function(t){e(t)}))}(e.componentSlot)}}if(I.def in o.attributes&&i.def(o.attributes.getNamedItem(I.def),s),I.entry in o.attributes&&i.entry(o.attributes.getNamedItem(I.entry),s),I.wait in o.attributes)return i.wait(o.attributes.getNamedItem(I.wait));if(t.component.check(o.localName))return t.component.order(o,s);if(I.for in o.attributes)return i.for(o.attributes.getNamedItem(I.for),s);if(I.if in o.attributes)return i.if(o.attributes.getNamedItem(I.if),s);(I.elseif in o.attributes||I.else in o.attributes)&&L.warn('The "'+I.elseif+'" or "'+I.else+'" requires an element with "'+I.if+'" above.'),I.show in o.attributes&&i.show(o.attributes.getNamedItem(I.show),s);var f=null;if((f=o.attributes.getNamedItem(I.req))||(f=x(o.attributes).find((function(e){return I.check(e,I.req)}))))return i.req(f,s);var p;if(p=x(o.attributes).find((function(e){var t=e.name;return t===I.data||d(t,I.data+":")})))return i.data(p,s);if(I.put in o.attributes)return i.put(o.attributes.getNamedItem(I.put),s);y(x(o.attributes),(function(e){a(e,s)}))}if(I.check(o,I.href))return i.href(o,s);if(I.check(o,I.content))return i.content(o);if(I.check(o,I.bind))return i.bind(o,s);if(!Object.keys(i.$custom).find((function(e){return I.check(o,e)}))||!i.custom(o,s)){if(I.check(o,I.property)&&!I.isConstant(o.nodeName)&&i.property(o,s),I.check(o,I.skeleton)&&i.skeleton(o),I.check(o,I.on))return t.eventHandler.handle(o,s,r);var h;u(o.nodeValue)&&(h=t.delimiter.run(o.nodeValue))&&0!==h.length&&t.binder.create({node:o,isConnected:function(){return n.isConnected},fields:h,context:r,data:s}),y(x(o.childNodes),(function(e){return a(e,s)}))}}};return a(n,o),n.hasAttribute(I.silent)&&n.removeAttribute(I.silent),c(e.onDone)&&e.onDone.call(r,n),n},n.prototype.analize=function(e){return!0},n}(S),Q=function(e){function n(t){var n=e.call(this)||this;return n.binds=[],n.DEFAULT_BINDER_PROPERTIES={text:"value",number:"valueAsNumber",checkbox:"checked",radio:"value"},n.BindingDirection={fromInputToData:"fromInputToData",fromDataToInput:"fromDataToInput"},n.bouer=t,n.evaluator=V.Resolve(n.bouer,_),V.Register(n),n.cleanup(),n}return t(n,e),n.prototype.create=function(e){var t,n=this,r=e.node,o=e.data,u=e.fields,s=e.isReplaceProperty,c=e.context,d=l(null!==(t=r.nodeValue)&&void 0!==t?t:""),f=r.nodeName,h=r.ownerElement||r.parentNode,v=V.Resolve(this.bouer,J),m=e.onUpdate||function(e,t){},g={node:r,data:o,nodeName:f,nodeValue:d,fields:u,parent:h,value:""},N=function(e){v.run(f,{type:e,action:function(e){e({binder:g,detail:{}},{success:function(){},fail:function(){},done:function(){}})}})};if(f.substring(0,I.bind.length)===I.bind){var A="",k=h.type||h.localName;A=I.bind===f?this.DEFAULT_BINDER_PROPERTIES[k]||"value":f.split(":")[1];var C,E,O=h instanceof HTMLSelectElement,j=O&&!0===h.multiple,R=b(h,[":value"],!0),T=R?R.value:'"'+h.value+'"',D=l(d),S=function(e,t){return O&&!j&&Array.isArray(C)&&!T?L.error("Since it's a <select> array binding, it expects the \u201cmultiple\u201d attribute in order to bind the multiple values."):j||!Array.isArray(C)||T?{fromDataToInput:function(){if(!Array.isArray(C))return"radio"===k?h.checked=h[A]==t:h[A]=a(t)?p(t):i(t)?"":t;if(E=E||n.evaluator.exec({data:o,expression:T,context:c}),j)return y(x(h.options),(function(e){e.selected=-1!==C.indexOf(l(e.value))}));if(-1===C.indexOf(E))switch(typeof h[A]){case"boolean":h[A]=!1;break;case"number":h[A]=0;break;default:h[A]=""}},fromInputToData:function(){if(!Array.isArray(C))return o[D]=t;if(E=E||n.evaluator.exec({data:o,expression:T,context:c}),j){var e=[];return y(x(h.options),(function(t){!0===t.selected&&e.push(l(t.value))})),C.splice(0,C.length),C.push.apply(C,e)}t?C.push(E):C.splice(C.indexOf(E),1)}}[e]():L.error('Since it\'s an array binding it expects a model but it has not been defined, provide a model as it follows: value="String-Model" or :value="Object-Model".')};$.once("AfterGet",(function(t){t.onemit=function(t){n.binds.push({isConnected:e.isConnected,watch:t.onChange((function(e){S(n.BindingDirection.fromDataToInput,e),m(e,r),N("update")}),r)})},C=n.evaluator.exec({data:o,expression:D,context:c})})),S(this.BindingDirection.fromDataToInput,C);var M=["input","propertychange","change"];return-1===M.indexOf(h.localName)&&M.push(h.localName),y(M,(function(e){"change"===e&&"select"!==h.localName||h.addEventListener(e,(function(){S(n.BindingDirection.fromInputToData,h[A])}),!1)})),h.removeAttribute(r.nodeName),N("bind"),g}var q=r;f.substring(0,I.property.length)===I.property&&i(s)&&(g.nodeName=f.substring(I.property.length),h.setAttribute(g.nodeName,d),q=h.attributes[g.nodeName],h.removeAttribute(r.nodeName));var _=function(){var e=g.nodeValue,t=!1;if(y(u,(function(a){var u=a.delimiter;u&&"html"===u.name&&(t=!0);var s=n.evaluator.exec({data:o,expression:a.expression,context:c});s=i(s)?"":s,e=e.replace(a.field,p(s)),u&&"function"==typeof u.update&&(e=u.update(e,r,o))})),g.value=e,t){var a=w("div",(function(t){t.innerHTML=e})).build().children[0];h.appendChild(a),V.Resolve(n.bouer,K).compile({el:a,data:o,context:c})}else q.nodeValue=e};return $.once("AfterGet",(function(t){t.onemit=function(t){n.binds.push({isConnected:e.isConnected,watch:t.onChange((function(e){_(),m(e,r),N("update")}),r)})},_()})),g.node=q,N("bind"),g},n.prototype.onPropertyChange=function(e,t,n){var r;return $.once("AfterGet",(function(o){o.onemit=function(e){return r=e.onChange(t)},n[e]})),r},n.prototype.onPropertyInScopeChange=function(e){var t=this,n=[];return $.once("AfterGet",(function(r){r.onemit=function(r){n.push(r.onChange((function(){return e.call(t.bouer,t.bouer)})))},e.call(t.bouer,t.bouer)})),n},n.prototype.cleanup=function(){var e=this;D.run((function(){e.binds=g(e.binds,(function(e){if(e.isConnected())return!0;e.watch.destroy()}))}))},n}(S),Z=function(e){function n(t){var n=e.call(this)||this;return n.bouer=t,V.Register(n),n}return t(n,e),n.prototype.htmlToJsObj=function(e,t,n){var r=void 0,o=this;if(e instanceof HTMLElement)r=e;else if("string"==typeof e)try{var u=this.bouer.el.querySelector(e);if(!u)return null;r=u}catch(e){return null}if(i(r))throw L.error("Invalid element passed in app.toJsObj(...).");var l=((t=t||{}).names||"[name]").replace(/\[|\]/g,"").split(","),d=(t.values||"[value]").replace(/\[|\]/g,"").split(","),f=function(e,t){return t in e?e[t]:e.getAttribute(t)||e.innerText},p=function(e){var t={},r={BUTTON:!0},i={checkbox:!0,radio:!0};return function e(a){var u=b(a,l);if(u){var s=u.value;if(!0===r[a.tagName])return;if(a instanceof HTMLInputElement&&!0===i[a.type]&&!1===a.checked)return;var p=t[s],h=a.hasAttribute(I.array),v=function(e){var t=void 0;return d.find((function(n){return!!(t=f(e,n))})),t}(a);t[s]=h?p?M.array(p,v):[v]:p?M.array(p,v):v,c(n)&&n.call(o.bouer,t,s,v,a)}y(x(a.children),(function(t){b(t,[I.build])||e(t)}))}(e),t},h=p(r);return y(x(r.querySelectorAll("["+I.build+"]")),(function(e){var t=f(e,I.build),r=e.hasAttribute(I.array),u=p(e);(function(e){if(s(e))return!1;for(var t=!1,n=Object.keys(e),r=0;r<n.length;r++)if(!i(n[r])){t=!0;break}return t})(u)&&function t(l,d){var f=l.split("."),p=f[0];f.shift();var h=d[p];return i(h)&&(d[p]={}),0===f.length?(r?a(h)&&!s(h)?d[p]=[M.obj(h,u)]:Array.isArray(h)?h.push(u):d[p]=[u]:i(h)?d[p]=u:d[p]=M.obj(h,u),void(c(n)&&n.call(o.bouer,d,p,u,e))):Array.isArray(h)?y(h,(function(e){t(f.join("."),e)})):void t(f.join("."),d[p])}(t,h)})),h},n}(S),ee=function(e){function n(t){var n=e.call(this)||this;return n.backgroudColor="",n.waveColor="",n.defaultBackgroudColor="#E2E2E2",n.defaultWaveColor="#ffffff5d",n.identifier="bouer",n.reset(),n.bouer=t,n.style=w("style",(function(e){return e.id=n.identifier})).build(),V.Register(n),n}return t(n,e),n.prototype.reset=function(){this.backgroudColor=this.defaultBackgroudColor,this.waveColor=this.defaultWaveColor},n.prototype.init=function(e){var t=this;if(this.style){var n=I.skeleton;if(j.getElementById(this.identifier)||j.head.appendChild(this.style),this.style.sheet){for(var r=0;r<this.style.sheet.cssRules.length;r++)this.style.sheet.deleteRule(r);e?(this.backgroudColor=e.background||this.defaultBackgroudColor,this.waveColor=e.wave||this.defaultWaveColor):this.reset(),y(["[silent]{ display: none!important; }","["+n+"] { background-color: "+this.backgroudColor+"!important; position: relative!important; overflow: hidden; }","["+n+"],["+n+"] * { color: transparent!important; }","["+n+"]::before, ["+n+']::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: block; }',"["+n+"]::before { background-color: "+this.backgroudColor+"!important; z-index: 1;}","["+n+"]::after { transform: translateX(-100%); background: linear-gradient(90deg, transparent, "+this.waveColor+", transparent); animation: loading 1.5s infinite; z-index: 2; }","@keyframes loading { 100% { transform: translateX(100%); } }","@-webkit-keyframes loading { 100% { transform: translateX(100%); } }"],(function(e){return t.style.sheet.insertRule(e)}))}}},n.prototype.clear=function(e){e=e?'="'+e+'"':"",y(x(this.bouer.el.querySelectorAll("["+I.skeleton+e+"]")),(function(e){return e.removeAttribute(I.skeleton)}))},n}(S),te=function(e){function n(t,n){var r=e.call(this)||this;if(r.name="Bouer",r.version="3.0.0",r.__id__=V.GetId(),r.refs={},r.isDestroyed=!1,n=n||{},r.config=n.config,r.deps=n.deps||{},i(t)||""===l(t))throw L.error(new Error("Invalid selector provided to the instance."));var o=j.querySelector(t);if(!o)throw L.error(new SyntaxError("Element with selector \u201c"+t+"\u201d not found."));r.el=o;var a=new z(r);new _(r);var u=new J(r);"function"==typeof n.middleware&&n.middleware.call(r,u.register,r),r.data=G.transform({inputObject:n.data||{},context:r}),r.globalData=G.transform({inputObject:n.globalData||{},context:r});var s=n.delimiters||[];s.push.apply(s,[{name:"common",delimiter:{open:"{{",close:"}}"}},{name:"html",delimiter:{open:"{{:html ",close:"}}"}}]),new Q(r);var c=new q(s,r),d=new P(r),f=new B(r),p=new X(r),v=new K(r,n.directives||{});new Z(r);var m=new ee(r);return m.init(),r.$delimiters={add:c.add,remove:c.remove,get:function(){return c.delimiters.slice()}},r.$data={get:function(e){return e?a.data[e]:a.data},set:function(e,t,n){return e in a.data?L.log("There is already a data stored with this key \u201c"+e+"\u201d."):(!0===(null!=n&&n)&&G.transform({context:r,inputObject:t}),V.Resolve(r,z).set("data",e,t))},unset:function(e){return delete a.data[e]}},r.$req={get:function(e){return e?a.req[e]:a.req},unset:function(e){return delete a.req[e]}},r.$wait={get:function(e){return e?a.wait[e]:a.wait},set:function(e,t){if(!(e in a.wait))return a.wait[e]={data:t,nodes:[]};var n=a.wait[e];return n.data=t,y(n.nodes,(function(e){e&&v.compile({el:e,data:G.transform({context:r,inputObject:n.data}),context:r})}))},unset:function(e){return delete a.wait[e]}},r.$skeleton={clear:function(e){return m.clear(e)},set:function(e){return m.init(e)}},r.$components={add:function(e){return p.prepare([e])},get:function(e){return p.components[e]}},r.$routing=f,h(r,"refs",{get:function(){var e={};return y(x(r.el.querySelectorAll("["+I.ref+"]")),(function(t){var n=l(t.attributes[I.ref].value)||t.name||"";return""===n?L.error("Expected an expression in \u201c"+t.name+"\u201d or at least \u201cname\u201d attribute to combine with \u201c"+t.name+"\u201d."):n in e?L.warn("The key \u201c"+n+"\u201d in \u201c"+t.name+"\u201d is taken, choose another key.",t):void(e[n]=t)})),e}}),y([n.beforeLoad,n.loaded,n.beforeDestroy,n.destroyed],(function(e){"function"==typeof e&&d.on({eventName:e.name,callback:e,attachedNode:o,modifiers:{once:!0},context:r})})),d.emit({eventName:"beforeLoad",attachedNode:o}),p.prepare(n.components||[]),v.compile({el:r.el,data:r.data,context:r,onDone:function(){return d.emit({eventName:"loaded",attachedNode:o})}}),R.addEventListener("beforeunload",(function(){r.isDestroyed||(d.emit({eventName:"beforeDestroy",attachedNode:o}),r.destroy(),r.isDestroyed=!0)}),{once:!0}),D.run((function(e){if(r.isDestroyed)return e();r.el.isConnected||(d.emit({eventName:"beforeDestroy",attachedNode:r.el}),r.destroy(),r.isDestroyed=!0,e())})),f.init(),j.head.querySelector("link[rel~='icon']")||w("link",(function(e){e.rel="icon",e.type="image/png",e.href="https://afonsomatelias.github.io/assets/bouer/img/short.png"})).appendTo(j.head),r}return t(n,e),n.prototype.set=function(e,t){return void 0===t&&(t=this.data),a(e)?a(t)&&null==t?(L.error('Invalid targetObject value, expected an "Object Literal" and got "'+typeof t+'".'),e):(G.transform({inputObject:e,context:this}),y(Object.keys(e),(function(n){return v(t,e,n)})),t):(L.error('Invalid inputData value, expected an "Object Literal" and got "'+typeof e+'".'),t)},n.prototype.toJsObj=function(e,t,n){return V.Resolve(this,Z).htmlToJsObj(e,t,n)},n.prototype.watch=function(e,t,n){return void 0===n&&(n=this.data),V.Resolve(this,Q).onPropertyChange(e,t,n||this.data)},n.prototype.react=function(e){return V.Resolve(this,Q).onPropertyInScopeChange(e)},n.prototype.on=function(e,t,n){return V.Resolve(this,P).on({eventName:e,callback:t,attachedNode:(n||{}).attachedNode,modifiers:(n||{}).modifiers,context:this})},n.prototype.off=function(e,t,n){return V.Resolve(this,P).off({eventName:e,callback:t,attachedNode:n})},n.prototype.emit=function(e,t){var n=t||{};return V.Resolve(this,P).emit({eventName:e,attachedNode:n.element,init:n.init,once:n.once})},n.prototype.lazy=function(e,t){var n,r=this;t=i(t)?500:t;var o=arguments[2];return function(){var i=[].slice.call(arguments),a=function(){n=null,o||e.apply(r,i)},u=o&&!n;clearTimeout(n),n=setTimeout(a,t),u&&e.apply(r,i)}},n.prototype.compile=function(e){return V.Resolve(this,K).compile({el:e.el,data:e.data,context:e.context,onDone:e.onDone})},n.prototype.destroy=function(){var e=this.el,t=V.Resolve(this,P).$events,n=(t.destroyed||[]).concat(t["component:destroyed"]||[]);this.emit("destroyed",{element:this.el}),y(n,(function(e){return e.emit({once:!0})})),t.destroyed=[],t["component:destroyed"]=[],"body"==e.tagName?e.innerHTML="":j.contains(e)&&j.body.removeChild(e),V.Dispose(this)},n.prototype.beforeLoad=function(e){},n.prototype.loaded=function(e){},n.prototype.beforeDestroy=function(e){},n.prototype.destroyed=function(e){},n}(S);exports.Component=F,exports.Reactive=G,exports.Watch=H,exports.default=te;